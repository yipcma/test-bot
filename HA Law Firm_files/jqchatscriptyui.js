var offlineBtnClicked=false;var actualUserIds=null;var laScriptObj={randomnumber:Math.floor(Math.random()*11),LC_SN:"LC_SN",live_chat_Image:null,disabled:false,signalRConnected:false,MsgWin:document.getElementById("txtMessageWin"),ChatWin:document.getElementById("txtChatWin"),LastMessageBy:"",FirstMessageByVisitor:"",OperatorMessageCounter:0,OperatorMessageCounterReply:null,OperatorMessageCounterReply2:null,OperatorMessageCounterReply3:null,MinChats:3,MaxChats:4,OneMinTimer:60000,OperatorAckCounterReply:null,OperatorAckCounterReply2:null,OperatorAckCounterReply3:null,invitationAck:false,pauseOtherTab:false,pauseOtherTabFiller:false,blockIps:false,vstrCount:1,IsConnecting:false,XMPPConnected:false,XMPPConnectedRetry:false,retryCount:0,RetryCheckConn:0,RetryConnection:false,ERROR:false,CONNECTED:false,CONNFAIL:false,AUTHENTICATING:false,AUTHFAIL:false,DISCONNECTED:false,DISCONNECTING:false,ATTACHED:false,CONNECTING:false,hideMyWIndowVar:"",referrer:null,host:urlHost,xmpp_invite:false,chatId:null,websiteId:null,websiteId:"",username:null,userSName:null,visitorId:"",visitorName:"",actualUserId:null,actualUserIdCustom:null,dataThrow:0,unblock:true,EMP:"",autoGreetMessage:"",priorityLanguage:"",currentLanguageId:"",blockLanguage:"",IsAlreadyGreeted:false,lc_servicestatus:"",GUID:null,LC_VIC:"WG_VIC_J",LC_DND:"WG_DND",LC_IGN:"wg_Ign",LC_CEC:"WG_CEC",LC_MIN:"WG_MIN",LC_TIME:"LC_TIME",timeZone:"",userLanguage:"",SessionCookie:null,getMethodStr:"method",parRandmStr:"parR",WithoutGreet:false,greetType:"Active",firstKey:false,firstMessage:true,CloseGreet:"",isAlreadyInChat:false,UserNameCustom:'',dataThrow:0,ArrayDataToThrow:new Array,dataAddUsers:0,ArrayUsers:new Array,greetType:"Active",username:"",connection:null,room:null,nickname:null,VisitorJID:0,NS_MUC:"http://jabber.org/protocol/muc",joined:null,participants:null,connectionStatus:null,connectionRoomStatus:null,WebsiteGreet:null,chat:null,getRandomValue:function(){var dt=new Date;return dt.getTime().toString()},checkMobile:function(){var mobiles=["iphone","ipod","ipad","series60","symbian","android","windows ce","blackberry","palm","avantgo","docomo","vodafone","j-phone","xv6850","htc","lg;","lge","mot","nintendo","nokia","samsung","sonyericsson"];laScriptObj.isMobile=false;var userAgent=navigator.userAgent.toLowerCase();for(var i=0;i<mobiles.length;i++)
if(userAgent.match(mobiles[i])!=null){laScriptObj.isMobile=true;break}},getDomain:function(url){var a,domain;a=document.createElement("a");a.href=url;domain=a.hostname;domain=domain.replace(/^www\./,"");return domain},getDomainName:function(referrer){if(laScriptObj.referrer)
return laScriptObj.referrer.split(/\/+/g)[1];else
return""},ReplaceSpecialCharacters:function(stringValue){var updatedString="";updatedString=stringValue.replace(/#/g,"%23");updatedString=updatedString.replace(/&/g,"%26");return updatedString},getReferrer:function(){var ref="";if(document.referrer&&document.referrer!="")
ref=laScriptObj.ReplaceSpecialCharacters(document.referrer.toString());return ref},parseURL:function(url){remaining_url=url.substr(0,url.length);domain_i=remaining_url.indexOf("/");domain_i=domain_i==-1?remaining_url.length:domain_i;var domain=remaining_url.substr(0,domain_i);return domain},createCookie:function(cookieName,value,hours){if(hours){var date=new Date;date.setTime(date.getTime()+hours*60*60*1E3);var expires="; expires="+date.toGMTString()}else
var expires="";document.cookie=cookieName+"="+value+expires+"; path=/; domain="+laScriptObj.parseURL(laScriptObj.host)+";"},readCookie:function(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" ")
c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)
return c.substring(nameEQ.length,c.length)}},readCookieJson:function(name){var returnData="";var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" ")
c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)
returnData=c.substring(nameEQ.length,c.length)}
if(returnData!="")
return eval("("+returnData+")");else
return""},checkJqueryVersion:function(strVersionA,strVersionB){var arrVersionA=strVersionA.split(".");var arrVersionB=strVersionB.split(".");if(arrVersionA.length==arrVersionB.length){var intVersionA=1E8*parseInt(arrVersionA[0])+1E6*parseInt(arrVersionA[1])+1E4*parseInt(arrVersionA[2]);var intVersionB=1E8*parseInt(arrVersionB[0])+1E6*parseInt(arrVersionB[1])+1E4*parseInt(arrVersionB[2]);if(intVersionA>intVersionB)
return 1;else if(intVersionA<intVersionB)
return-1;else
return 0}else if(arrVersionA.length==2&&arrVersionA.length<arrVersionB.length){var intVersionA=1E8*parseInt(arrVersionA[0])+1E6*parseInt(arrVersionA[1]);var intVersionB=1E8*parseInt(arrVersionB[0])+1E6*parseInt(arrVersionB[1]);if(intVersionA>intVersionB)
return 1;else if(intVersionA<intVersionB)
return-1;else
return 0}
return false},eventConnected:function(name){laScriptObj.name=name;laScriptObj.joined=false;laScriptObj.participants={};laScriptObj.connection.send($pres().c("priority").t("0"));laScriptObj.connection.addHandler(laScriptObj.on_presence,null,"presence");laScriptObj.connection.addHandler(laScriptObj.on_public_message,null,"message","groupchat")},on_presence:function(presence){var from=presence.getAttribute("from");var room=Strophe.getBareJidFromJid(from);if(room===laScriptObj.room){var nick=Strophe.getResourceFromJid(from);if(nick!=null&&presence.getAttribute("type")==="error")
laScriptObj.connection.disconnect();else if(!laScriptObj.participants[nick]&&presence.getAttribute("type")!=="unavailable"){laScriptObj.participants[nick]=nick||true;laScriptObj.ArrayUsers[laScriptObj.dataAddUsers]=nick;laScriptObj.dataAddUsers++}else if(laScriptObj.participants[nick]&&presence.getAttribute("type")==="unavailable")
for(var i in laScriptObj.ArrayUsers)
if(laScriptObj.ArrayUsers[i]==nick){laScriptObj.ArrayUsers.splice(i,1);break}
if(presence.getAttribute("type")!=="error")
if(presence.getElementsByTagName("status[code='210']").length>0)
laScriptObj.nickname=Strophe.getResourceFromJid(from)}
return true},on_public_message:function(message){var from="";if(message.getAttribute("from")!=undefined)
from=message.getAttribute("from");var end_time="false";if(message.getAttribute("end_time")!=undefined)
end_time=message.getAttribute("end_time").toLowerCase();var room=Strophe.getBareJidFromJid(from);var nick=Strophe.getResourceFromJid(from);var item=0,user_id=0;var body="";if(message.textContent==undefined)
body=message.text;else
body=message.textContent;if(end_time=="true"&&laScriptObj.room!=null){WGChat.closeXmppChat(body);return true}
if(message.getAttribute("user_id")!=undefined)
user_id=message.getAttribute("user_id");if(body.indexOf("TRANSFERCHAT")>0){laScriptObj.actualUserId=message.getAttribute("manager_id");laScriptObj.actualUserIdCustom=laScriptObj.actualUserId;laScriptObj.username=message.getAttribute("visitor_name");laScriptObj.UserNameCustom=message.getAttribute("visitor_name");if(laScriptObj.EMP!=""&&laScriptObj.EMP=="01"){if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected){}
clearTimeout(laScriptObj.OperatorMessageCounterReply);clearTimeout(laScriptObj.OperatorMessageCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply3);laScriptObj.OperatorMessageCounterReply=setTimeout(function(){WGChat.MessageAwaiter1()},laScriptObj.OneMinTimer);}}
var jidNew=message.getAttribute("from").split("/")[message.getAttribute("from").split("/").length-1];if(laScriptObj.nickname!=jidNew&&user_id!=""&&user_id.indexOf("-")!=-1&&laScriptObj.EMP!=""&&laScriptObj.EMP=="01"){if(body.indexOf("_Transferred Message Delay")>0){laScriptObj.FirstMessageByVisitor="";laScriptObj.pauseOtherTab=true;clearTimeout(laScriptObj.OperatorMessageCounterReply);clearTimeout(laScriptObj.OperatorMessageCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply3);}else if(body.indexOf("_Transferred Acknowledge Delay")>0){laScriptObj.FirstMessageByVisitor="";laScriptObj.pauseOtherTab=true;clearTimeout(laScriptObj.OperatorAckCounterReply);clearTimeout(laScriptObj.OperatorAckCounterReply2);}}
if(body!=""&&(room!=null&&(laScriptObj.room!=null&&room.toLowerCase()===laScriptObj.room.toLowerCase()))){if(nick!=null){var stringValue="";if(message.getElementsByTagName("delay").length>0){item=item+1;if(user_id=="0"){stringValue=body;var jid=message.getAttribute("from").split("/")[message.getAttribute("from").split("/").length-1];if(nick==jid){WGChat.vstrChatLinking(message.getAttribute("visitor_name"),body,true);laScriptObj.ChatWin.scrollTop=laScriptObj.ChatWin.scrollHeight}}else{if(user_id.indexOf("-")!=0&&(body!="[destroy room]"&&(body!="[DND]"&&(body!="[Ignore]"&&body!="[NICKCHANGE]")))){if(user_id==message.getAttribute("manager_id"))
laScriptObj.username=message.getAttribute("visitor_name");if(body!="[destroy room]"&&(body!="[DND]"&&(body!="[Ignore]"&&(body!="[NICKCHANGE]"&&(body!="[UnLockChat]"&&body!="[LockChat]"))))){laScriptObj.actualUserIdCustom=message.getAttribute("user_id");if(body=="Your patience is much appreciated. I'll be with you in a moment."){laScriptObj.pauseOtherTabFiller=true;}
WGWebsite.opChatLinking(laScriptObj.username,body,true);}}
laScriptObj.ChatWin.scrollTop=laScriptObj.ChatWin.scrollHeight}
var prop=DomStyle.getStyle("ChatDiv","display");if(prop!=null&&prop!="block")
if(laScriptObj.readCookie("minimizeCookie")=="1"||laScriptObj.readCookie("minimizeCookie")==1)
WGWindowLoader.laJquery("#newOnlineBtn").css("display","block");else{DomStyle.set("ChatDiv","display","block");DomStyle.set("ChatDiv","opacity","1")}}else if(user_id>0){if(body=="[NICKCHANGE]"){laScriptObj.visitorName=message.getAttribute("visitor_name");var vstArrayOfObjects="{'V_N':"+"'"+laScriptObj.visitorName+"'"+",'V_I':"+"'"+laScriptObj.visitorId+"'"+",'Session':"+"'"+laScriptObj.GUID+"'"+"}";var resultCookie=laScriptObj.readCookieJson(laScriptObj.LC_VIC);if(resultCookie!=null&&(resultCookie.V_N!==undefined&&resultCookie.V_I==laScriptObj.visitorId)){laScriptObj.createCookie(laScriptObj.LC_VIC,null,-24);laScriptObj.createCookie(laScriptObj.LC_VIC,vstArrayOfObjects,720)}}else{var opWebsiteId=message.getAttribute("website_id");if(message.getAttribute("manager_id")==user_id&&opWebsiteId!="0")
laScriptObj.username=message.getAttribute("visitor_name");if(body!="[destroy room]"&&(body!="[DND]"&&(body!="[Ignore]"&&(body!="[NICKCHANGE]"&&(body!="[UnLockChat]"&&body!="[LockChat]"))))){laScriptObj.actualUserIdCustom=message.getAttribute("user_id");if(body=="Your patience is much appreciated. I'll be with you in a moment."){laScriptObj.pauseOtherTabFiller=true;}
WGWebsite.opChatLinking(laScriptObj.username,body,true);}}
var prop=DomStyle.getStyle("ChatDiv","display");if(prop!=null&&prop!="block");}else if(user_id=="0"&&body!="")
if(laScriptObj.nickname!=message.getAttribute("from").split("/")[message.getAttribute("from").split("/").length-1]&&body!=""){WGChat.vstrChatLinking(message.getAttribute("visitor_name"),body,true);laScriptObj.ChatWin.scrollTop=laScriptObj.ChatWin.scrollHeight;}}}else if(laScriptObj.statusDIV!=null&&laScriptObj.statusDIV!="undefined"){var composing=message.getElementsByTagName("composing");var paused=message.getElementsByTagName("paused");if(composing.length>0&&user_id!=="0")
laScriptObj.statusDIV.style.visibility="visible";else if(paused.length>0&&user_id!=="0")
laScriptObj.statusDIV.style.visibility="hidden"}
return true},connect:function(jid,pws){laScriptObj.connection=new Strophe.Connection(WGWindowConstant.XMPP_SERVICE);laScriptObj.connection.connect(jid,null,function(status){laScriptObj.connectionStatus=status;laScriptObj.IsConnecting=true;if(status===Strophe.Status.CONNECTED){laScriptObj.XMPPConnected=true;var triggerConnection=new laScriptObj.eventConnected("connected");var _listnerConnection=new listnerConnection("connectedGuest",triggerConnection);var isFire=triggerConnection.connected.fire();laScriptObj.CONNECTED='Connected..';}else if(status===Strophe.Status.DISCONNECTED){var triggerDisconnected=new eventDisconnected("disconnected");var _listnerDisconnection=new listnerDisconnection("disconnectedGuest",triggerDisconnected);laScriptObj.DISCONNECTED='Diconnected..';}
if(status==Strophe.Status.CONNECTING)
laScriptObj.CONNECTING='Connecting..';else if(status==Strophe.Status.CONNFAIL)
laScriptObj.CONNFAIL="Connection Failed:"+Strophe.Status.ERROR;else if(status==Strophe.Status.DISCONNECTING)
laScriptObj.DISCONNECTING='Diconnecting..';else if(status==Strophe.Status.AUTHENTICATING)
laScriptObj.AUTHENTICATING='Authenticating client..';else if(status==Strophe.Status.AUTHFAIL)
laScriptObj.AUTHFAIL="Authorization Fail:"+Strophe.Status.AUTHFAIL;else if(status==Strophe.Status.ERROR)
laScriptObj.ERROR="Error:"+Strophe.Status.ERROR;})},initiateChatRoom:function(){if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.getUserIdOrConnId(laScriptObj.actualUserId).done(function(e){if(e!=""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs","initiateChatRoom-XMPPConnected:"+laScriptObj.XMPPConnected+" CONNECTING:"+laScriptObj.CONNECTING+" CONNFAIL:"+laScriptObj.CONNFAIL+" DISCONNECTING:"+laScriptObj.DISCONNECTING+" DISCONNECTED:"+laScriptObj.DISCONNECTED+" AUTHENTICATING:"+laScriptObj.AUTHENTICATING+" AUTHFAIL:"+laScriptObj.AUTHFAIL+" ERROR:"+laScriptObj.ERROR+" ReTryCount :"+laScriptObj.retryCount+" Singlar Connected:True").done(function(bool){}).fail(function(){})}else if(e==""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs","initiateChatRoom-XMPPConnected:"+laScriptObj.XMPPConnected+" CONNECTING:"+laScriptObj.CONNECTING+" CONNFAIL:"+laScriptObj.CONNFAIL+" DISCONNECTING:"+laScriptObj.DISCONNECTING+" DISCONNECTED:"+laScriptObj.DISCONNECTED+" AUTHENTICATING:"+laScriptObj.AUTHENTICATING+" AUTHFAIL:"+laScriptObj.AUTHFAIL+" ERROR:"+laScriptObj.ERROR+" Singlar Connected:False "+laScriptObj.actualUserId).done(function(bool){}).fail(function(){})}}).fail(function(){});laScriptObj.room="room"+laScriptObj.chatId+WGWindowConstant.chatRoom;laScriptObj.nickname="Visitor"+Math.floor(Math.random()*1E4+1);laScriptObj.connection.send($pres({to:laScriptObj.room+"/"+laScriptObj.nickname}).c("x",{xmlns:"muc#roomconfig_changesubject"}));laScriptObj.connection.send($pres({to:laScriptObj.room+"/"+laScriptObj.nickname}).c("x",{xmlns:laScriptObj.NS_MUC}));laScriptObj.VisitorJID=laScriptObj.connection.getJID();WGChat.sendFirstXmppMessage()
laScriptObj.RetryConnection=false;laScriptObj.RetryCheckConn=0;},connectRoom:function(jid,pws){laScriptObj.connection=new Strophe.Connection(WGWindowConstant.XMPP_SERVICE);laScriptObj.IsConnecting=true;laScriptObj.connection.connect(jid,null,function(status){laScriptObj.connectionRoomStatus=status;if(status===Strophe.Status.CONNECTED){laScriptObj.XMPPConnected=true;laScriptObj.CONNECTED='Connected...';var triggerRoomConnection=new laScriptObj.eventConnected("connected");var _listnerConnection=new laScriptObj.listnerRoomConnection("connectedGuest",triggerRoomConnection);var isFire=triggerRoomConnection.connected.fire();document.getElementById("live_chat_img").style.display="block"}else if(status===Strophe.Status.DISCONNECTED){laScriptObj.DISCONNECTED='Diconnected...';var triggerDisconnected=new eventDisconnected("disconnected");var _listnerDisconnection=new listnerDisconnection("disconnectedGuest",triggerDisconnected)}
if(status==Strophe.Status.CONNECTING)
laScriptObj.CONNECTING='Connecting...';else if(status==Strophe.Status.CONNFAIL)
laScriptObj.CONNFAIL="Connection Failed:"+Strophe.Status.ERROR;else if(status==Strophe.Status.DISCONNECTING)
laScriptObj.DISCONNECTING='Diconnecting...';else if(status==Strophe.Status.AUTHENTICATING)
laScriptObj.AUTHENTICATING='Authenticating client...';else if(status==Strophe.Status.AUTHFAIL)
laScriptObj.AUTHFAIL="Authorization Fail:"+Strophe.Status.AUTHFAIL;else if(status==Strophe.Status.ERROR)
laScriptObj.ERROR="Error:"+Strophe.Status.ERROR;});if(WGWindowLoader.signalRConnected){WGWindowLoader.chat.client.VisitorData=function(){};WGWindowLoader.laJquery.connection.hub.start({transport:["webSockets","longPolling"],xdomain:true},function(){});WGWindowLoader.laJquery.connection.hub.start().done(function(){WGWindowLoader.CallSignalR()}).fail(function(){})}},listnerRoomConnection:function(name,conn){laScriptObj.joined=false;laScriptObj.participants={};laScriptObj.room="room"+laScriptObj.chatId+WGWindowConstant.chatRoom;laScriptObj.nickname="Visitor"+Math.floor(Math.random()*1E4+1);laScriptObj.connection.send($pres({to:laScriptObj.room+"/"+laScriptObj.nickname}).c("x",{xmlns:laScriptObj.NS_MUC}));laScriptObj.VisitorJID=laScriptObj.connection.getJID()},inviteOperator:function(bool){if(typeof WGWindowConstant.claimChatEnabled!="undefined"&&WGWindowConstant.claimChatEnabled){laScriptObj.isAlreadyInChat=true;if(laScriptObj.xmpp_invite==false){var isFound=false;var userIdsArray=actualUserIds.split('*');for(count=0;count<userIdsArray.length-
1;count++){if(userIdsArray[count]==laScriptObj.actualUserId){isFound=true;}}
if(isFound){for(count=0;count<userIdsArray.length-
1;count++){var claimURL="parUI!";claimURL+=userIdsArray[count],claimURL+="~parCI!",claimURL+=laScriptObj.chatId,claimURL+="~"+laScriptObj.parRandmStr+"!",claimURL+=laScriptObj.getRandomValue(),claimURL+="~"+laScriptObj.getMethodStr+"!laScriptObj.onInsertClaimResponse",laScriptObj.getJsonServiceResponse("InsertCInfoMc","laScriptObj.onInsertClaimResponse",claimURL);}}else{var claimURL="parUI!";claimURL+=laScriptObj.actualUserId,claimURL+="~parCI!",claimURL+=laScriptObj.chatId,claimURL+="~"+laScriptObj.parRandmStr+"!",claimURL+=laScriptObj.getRandomValue(),claimURL+="~"+laScriptObj.getMethodStr+"!laScriptObj.onInsertClaimResponse",laScriptObj.getJsonServiceResponse("InsertCInfoMc","laScriptObj.onInsertClaimResponse",claimURL);}
laScriptObj.xmpp_invite=true;WGWindowLoader.CallSignalR();}}else{laScriptObj.FirstMessageByVisitor="";var reason_packet=laScriptObj.chatId+"|"+laScriptObj.websiteId+"|"+laScriptObj.visitorId+"|"+laScriptObj.visitorName+"|"+laScriptObj.VisitorJID+"|"+laScriptObj.WebsiteGreet+"|"+laScriptObj.userSName;laScriptObj.connection.send($msg({to:laScriptObj.room}).c("x",{xmlns:"http://jabber.org/protocol/muc#user"}).c("invite",{to:laScriptObj.actualUserId+"@"+WGWindowConstant.XMPP_SERVER}).c("reason").t(reason_packet));laScriptObj.xmpp_invite=true;WGWindowLoader.CallSignalR();if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.getUserIdOrConnId(laScriptObj.actualUserId).done(function(e){if(e!=""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs","inviteOperator-XMPPConnected:"+laScriptObj.XMPPConnected+" CONNECTING:"+laScriptObj.CONNECTING+" CONNFAIL:"+laScriptObj.CONNFAIL+" DISCONNECTING:"+laScriptObj.DISCONNECTING+" DISCONNECTED:"+laScriptObj.DISCONNECTED+" AUTHENTICATING:"+laScriptObj.AUTHENTICATING+" AUTHFAIL:"+laScriptObj.AUTHFAIL+" ERROR:"+laScriptObj.ERROR+" Singlar Connected:True").done(function(bool){}).fail(function(){})}else if(e==""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs","inviteOperator-XMPPConnected:"+laScriptObj.XMPPConnected+" CONNECTING:"+laScriptObj.CONNECTING+" CONNFAIL:"+laScriptObj.CONNFAIL+" DISCONNECTING:"+laScriptObj.DISCONNECTING+" DISCONNECTED:"+laScriptObj.DISCONNECTED+" AUTHENTICATING:"+laScriptObj.AUTHENTICATING+" AUTHFAIL:"+laScriptObj.AUTHFAIL+" ERROR:"+laScriptObj.ERROR+" Singlar Connected:False "+laScriptObj.actualUserId).done(function(bool){}).fail(function(){})}}).fail(function(){});if(bool&&(laScriptObj.EMP!=""&&laScriptObj.EMP=="01")){clearTimeout(laScriptObj.OperatorAckCounterReply);clearTimeout(laScriptObj.OperatorAckCounterReply2);laScriptObj.OperatorAckCounterReply=setTimeout(function(){laScriptObj.AckAwaiter1()},30000)}
if(laScriptObj.EMP!=""&&laScriptObj.EMP=="01"){clearTimeout(laScriptObj.OperatorMessageCounterReply);clearTimeout(laScriptObj.OperatorMessageCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply3);laScriptObj.OperatorMessageCounterReply=setTimeout(function(){WGChat.MessageAwaiter1()},laScriptObj.OneMinTimer)}}},onInsertClaimResponse:function(result){if(result!=""){var reason_packet=laScriptObj.chatId+"|"+laScriptObj.websiteId+"|"+laScriptObj.visitorId+"|"+laScriptObj.visitorName+"|"+laScriptObj.VisitorJID+"|"+laScriptObj.WebsiteGreet+"|"+laScriptObj.userSName;laScriptObj.connection.send($msg({to:laScriptObj.room}).c("x",{xmlns:"http://jabber.org/protocol/muc#user"}).c("invite",{to:result+"@"+WGWindowConstant.XMPP_SERVER}).c("reason").t(reason_packet));WGWindowLoader.CallSignalR();}},inviteOperatorAwaiter:function(bool,chatId,websiteId,visitorId,visitorName,VisitorJID,WebsiteGreet,userSName,actualUserId){laScriptObj.FirstMessageByVisitor="";var reason_packet=chatId+"|"+websiteId+"|"+visitorId+"|"+visitorName+"|"+VisitorJID+"|"+WebsiteGreet+"|"+userSName;laScriptObj.connection.send($msg({to:laScriptObj.room}).c("x",{xmlns:"http://jabber.org/protocol/muc#user"}).c("invite",{to:laScriptObj.actualUserId+"@"+WGWindowConstant.XMPP_SERVER}).c("reason").t(reason_packet));laScriptObj.xmpp_invite=true;if(bool&&(laScriptObj.EMP!=""&&laScriptObj.EMP=="01")){clearTimeout(laScriptObj.OperatorAckCounterReply);clearTimeout(laScriptObj.OperatorAckCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply);clearTimeout(laScriptObj.OperatorMessageCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply3);laScriptObj.OperatorAckCounterReply=setTimeout(function(){laScriptObj.AckAwaiter1()},30000)}
if(laScriptObj.EMP!=""&&laScriptObj.EMP=="01"){clearTimeout(laScriptObj.OperatorMessageCounterReply);clearTimeout(laScriptObj.OperatorMessageCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply3);laScriptObj.OperatorMessageCounterReply=setTimeout(function(){WGWindowLoader.chat.server.markingChatAckLogs(visitorId,chatId,actualUserId,"logs","trf From: "+laScriptObj.UserNameCustom+" To: "+userSName+" Inside inviteOperatorAwaiter Calling").done(function(bool){})
WGChat.MessageAwaiter1()},laScriptObj.OneMinTimer)}},AckAwaiter1:function(){if(!laScriptObj.invitationAck){if(laScriptObj.LastMessageBy=="Visitor")
if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.getUserIdOrConnId(laScriptObj.actualUserId).done(function(e){if(e!=""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","Invite Same Greeter Inside AckAwaiter1() Greeter Inside the Redis (Available) Re-Send Invitation going to recall inviteOperatorAwaiter").done(function(bool){})
laScriptObj.invitationAck=false;laScriptObj.inviteOperatorAwaiter(false,laScriptObj.chatId,laScriptObj.websiteId,laScriptObj.visitorId,laScriptObj.visitorName,laScriptObj.VisitorJID,laScriptObj.WebsiteGreet,laScriptObj.userSName,laScriptObj.actualUserId);}else if(laScriptObj.isAlreadyInChat){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","Invite New Greeter Inside AckAwaiter1() Greeter Not (Available) going to call AckChat").done(function(bool){});laScriptObj.AckChat()}}).fail(function(){});clearTimeout(laScriptObj.OperatorAckCounterReply);clearTimeout(laScriptObj.OperatorAckCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply);clearTimeout(laScriptObj.OperatorMessageCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply3);laScriptObj.OperatorAckCounterReply2=setTimeout(function(){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","Waited 30 Sec for Ack Chat but no Acknowledgement fount Going to Call AckAwaiter2").done(function(bool){});laScriptObj.AckAwaiter2()},30000)}},AckAwaiter2:function(){if(!laScriptObj.invitationAck)
if(laScriptObj.LastMessageBy=="Visitor")
if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.getUserIdOrConnId(laScriptObj.actualUserId).done(function(e){if(e!=""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","Inside AckAwaiter2() Greeter Inside the Redis (Available)").done(function(bool){})}else if(laScriptObj.isAlreadyInChat){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","Inside AckAwaiter2() Greeter Not (Available) going to call AckChat").done(function(bool){});clearTimeout(laScriptObj.OperatorAckCounterReply);clearTimeout(laScriptObj.OperatorAckCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply);clearTimeout(laScriptObj.OperatorMessageCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply3);laScriptObj.AckChat()}}).fail(function(){})},AckChat:function(){var resultC=laScriptObj.readCookieJson("WG_WEB");var visitorIdURL="parS"+"!";visitorIdURL+=escape(laScriptObj.GUID);visitorIdURL+="~"+"parD"+"!";visitorIdURL+=laScriptObj.host;visitorIdURL+="~"+"parIsNew"+"!";if(laScriptObj!=null&&(laScriptObj.visitorId!=""&&laScriptObj.GUID==""))
visitorIdURL+="true";else
visitorIdURL+="false";visitorIdURL+="~parWI!";visitorIdURL+=laScriptObj.websiteId;visitorIdURL+="~parVI!";visitorIdURL+=laScriptObj.visitorId;visitorIdURL+="~parTZ!";visitorIdURL+=laScriptObj.timeZone;visitorIdURL+="~parLI!";visitorIdURL+=laScriptObj.userLanguage;visitorIdURL+="~parUI!";visitorIdURL+=laScriptObj.actualUserId;visitorIdURL+="~"+laScriptObj.parRandmStr+"!";visitorIdURL+=laScriptObj.getRandomValue();visitorIdURL+="~"+laScriptObj.getMethodStr+"!WGWebsite.onGetChatPrerequisiteAckResponse";laScriptObj.getJsonServiceResponse("ChatPreByLanAck","WGWebsite.onGetChatPrerequisiteAckResponse",visitorIdURL)},MessageAckChatDisConnect:function(){var resultC=laScriptObj.readCookieJson("WG_WEB");var visitorIdURL="parS"+"!";visitorIdURL+=escape(laScriptObj.GUID);visitorIdURL+="~"+"parD"+"!";visitorIdURL+=laScriptObj.host;visitorIdURL+="~"+"parIsNew"+"!";if(laScriptObj!=null&&(laScriptObj.visitorId!=""&&laScriptObj.GUID==""))
visitorIdURL+="true";else
visitorIdURL+="false";visitorIdURL+="~parWI!";visitorIdURL+=laScriptObj.websiteId;visitorIdURL+="~parVI!";visitorIdURL+=laScriptObj.visitorId;visitorIdURL+="~parTZ!";visitorIdURL+=laScriptObj.timeZone;visitorIdURL+="~parLI!";visitorIdURL+=laScriptObj.userLanguage;visitorIdURL+="~parUI!";visitorIdURL+=laScriptObj.actualUserId;visitorIdURL+="~"+laScriptObj.parRandmStr+"!";visitorIdURL+=laScriptObj.getRandomValue();visitorIdURL+="~"+laScriptObj.getMethodStr+"!WGWebsite.onGetChatPrerequisiteMessageAckDisconnectResponse";laScriptObj.getJsonServiceResponse("ChatPreByLanMessageAck","WGWebsite.onGetChatPrerequisiteMessageAckDisconnectResponse",visitorIdURL)},MessageAckChat:function(){var resultC=laScriptObj.readCookieJson("WG_WEB");var visitorIdURL="parS"+"!";visitorIdURL+=escape(laScriptObj.GUID);visitorIdURL+="~"+"parD"+"!";visitorIdURL+=laScriptObj.host;visitorIdURL+="~"+"parIsNew"+"!";if(laScriptObj!=null&&(laScriptObj.visitorId!=""&&laScriptObj.GUID==""))
visitorIdURL+="true";else
visitorIdURL+="false";visitorIdURL+="~parWI!";visitorIdURL+=laScriptObj.websiteId;visitorIdURL+="~parVI!";visitorIdURL+=laScriptObj.visitorId;visitorIdURL+="~parTZ!";visitorIdURL+=laScriptObj.timeZone;visitorIdURL+="~parLI!";visitorIdURL+=laScriptObj.userLanguage;visitorIdURL+="~parUI!";visitorIdURL+=laScriptObj.actualUserId;visitorIdURL+="~"+laScriptObj.parRandmStr+"!";visitorIdURL+=laScriptObj.getRandomValue();visitorIdURL+="~"+laScriptObj.getMethodStr+"!WGWebsite.onGetChatPrerequisiteMessageAckResponse";laScriptObj.getJsonServiceResponse("ChatPreByLanMessageAck","WGWebsite.onGetChatPrerequisiteMessageAckResponse",visitorIdURL)},MessageAckChatForcebly:function(){var resultC=laScriptObj.readCookieJson("WG_WEB");var visitorIdURL="parS"+"!";visitorIdURL+=escape(laScriptObj.GUID);visitorIdURL+="~"+"parD"+"!";visitorIdURL+=laScriptObj.host;visitorIdURL+="~"+"parIsNew"+"!";if(laScriptObj!=null&&(laScriptObj.visitorId!=""&&laScriptObj.GUID==""))
visitorIdURL+="true";else
visitorIdURL+="false";visitorIdURL+="~parWI!";visitorIdURL+=laScriptObj.websiteId;visitorIdURL+="~parVI!";visitorIdURL+=laScriptObj.visitorId;visitorIdURL+="~parTZ!";visitorIdURL+=laScriptObj.timeZone;visitorIdURL+="~parLI!";visitorIdURL+=laScriptObj.userLanguage;visitorIdURL+="~parUI!";visitorIdURL+=laScriptObj.actualUserId;visitorIdURL+="~"+laScriptObj.parRandmStr+"!";visitorIdURL+=laScriptObj.getRandomValue();visitorIdURL+="~"+laScriptObj.getMethodStr+"!WGWebsite.onGetChatPrerequisiteMessageAckForceblyResponse";laScriptObj.getJsonServiceResponse("ChatPreByLanMessageAck","WGWebsite.onGetChatPrerequisiteMessageAckForceblyResponse",visitorIdURL)},checkConnection:function(){if(!laScriptObj.XMPPConnected&&laScriptObj.RetryCheckConn<8){laScriptObj.RetryCheckConn++;WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs:ReTry","Wait To Connect:"+laScriptObj.RetryCheckConn+" RetryConnection:"+laScriptObj.RetryConnection).done(function(bool){});setTimeout("laScriptObj.checkConnection()",1E3);return;}
if(!laScriptObj.XMPPConnected&&(laScriptObj.RetryCheckConn>=8)&&!laScriptObj.RetryConnection){laScriptObj.connect(WGWindowConstant.XMPP_SERVER,"123");laScriptObj.RetryConnection=true;setTimeout("laScriptObj.checkConnection()",1E3);WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs:ReTry","Going TO Re-Connect Again:"+laScriptObj.RetryCheckConn+" RetryConnection:"+laScriptObj.RetryConnection+" XMPPConnected:"+laScriptObj.XMPPConnected).done(function(bool){});return;}else{if(laScriptObj.RetryConnection){setTimeout("laScriptObj.initiateChatRoom()",5000);WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs:ReTry","Re-Send Invitation After 5Sec:"+laScriptObj.RetryCheckConn+" XMPPConnected:"+laScriptObj.XMPPConnected).done(function(bool){});}else{laScriptObj.initiateChatRoom();WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs:ReTry","Send Invitation Smooth:"+laScriptObj.RetryCheckConn+" RetryConnection:"+laScriptObj.RetryConnection+" XMPPConnected:"+laScriptObj.XMPPConnected).done(function(bool){});}
laScriptObj.isAlreadyInChat=true;if(typeof WGWindowConstant.chatRating!="undefined"&&WGWindowConstant.chatRating){WGWindowLoader.laJquery("#upBTN").click(function(){WGVisitor.chatRating("5","Up Ratting")});WGWindowLoader.laJquery("#downBTN").click(function(){WGVisitor.chatRating("1","Down Ratting")})}}},onGetWebsiteIDResponse:function(result){if(result!=null){var newresult=WGWindowLoader.laJquery.parseJSON(result);laScriptObj.websiteId=newresult.W_I;laScriptObj.priorityLanguage=newresult.P_L;laScriptObj.timeZone=newresult.T_Z;var webArrayOfObjects="{'W_I':"+"'"+newresult.W_I+"'"+",'P_L':"+"'"+newresult.P_L+"'"+",'T_Z':"+"'"+newresult.T_Z+"'"+"}";laScriptObj.createCookie("WG_WEB",webArrayOfObjects,720);if(newresult.W_I!=0)
var setId=WGVisitor.InsertVisitorIdOnly()}},onGetWebsiteIDResponsePageBased:function(result){if(result!=null){var resultC=eval("("+result+")");laScriptObj.websiteId=resultC.W_I;laScriptObj.priorityLanguage=resultC.P_L;laScriptObj.timeZone=resultC.T_Z;var webArrayOfObjects="{'W_I':"+"'"+resultC.W_I+"'"+",'P_L':"+"'"+resultC.P_L+"'"+",'T_Z':"+"'"+resultC.T_Z+"'"+"}";laScriptObj.createCookie("WG_WEB",null,-24);laScriptObj.createCookie("WG_WEB",webArrayOfObjects,720);var setId=WGVisitor.InsertVisitorIdOnly()}},onGetWebsiteIDResponseOnly:function(result){if(typeof WGWindowConstant._isPageBased!="undefined"&&WGWindowConstant._isPageBased){var resultC=laScriptObj.readCookieJson("WG_WEB");if(resultC!=null&&resultC.W_I==WGWindowConstant._websiteId){laScriptObj.websiteId=resultC.W_I;laScriptObj.priorityLanguage=resultC.P_L;laScriptObj.timeZone=resultC.T_Z;laScriptObj.GUID=laScriptObj.SessionCookie;var resultCookie=laScriptObj.readCookieJson(laScriptObj.LC_VIC);if(resultCookie!=null&&(resultCookie.V_N!==undefined&&laScriptObj.websiteId!=null)){laScriptObj.visitorName=resultCookie.V_N;laScriptObj.visitorId=resultCookie.V_I;if(resultCookie.Session!=undefined&&(document.referrer!=""&&window.location!=document.referrer))
WGVisitor.InsertTrackingInformation(laScriptObj.visitorId);WGVisitor.getBlockIP(laScriptObj.visitorId,laScriptObj.websiteId)}}else{var websiteIdURL="parD!";websiteIdURL+=escape(laScriptObj.host);websiteIdURL+="~"+laScriptObj.parRandmStr+"!";websiteIdURL+=laScriptObj.getRandomValue();websiteIdURL+="~"+laScriptObj.getMethodStr+"!laScriptObj.onGetWebsiteIDResponsePageBased";laScriptObj.getJsonServiceResponse("GetWI","laScriptObj.onGetWebsiteIDResponsePageBased",websiteIdURL)}}else{var newresultServer=eval("("+result+")");if(newresultServer!=null&&(newresultServer.W_I!==undefined&&newresultServer.W_I!=0)){var resultCookies=laScriptObj.readCookieJson("WG_WEB");if(resultCookies!=null&&resultCookies.W_I==newresultServer.W_I){laScriptObj.websiteId=newresultServer.W_I;laScriptObj.priorityLanguage=newresultServer.P_L;laScriptObj.timeZone=newresultServer.T_Z;laScriptObj.GUID=laScriptObj.SessionCookie;var resultCookie=laScriptObj.readCookieJson(laScriptObj.LC_VIC);if(resultCookie!=null&&(resultCookie.V_N!==undefined&&laScriptObj.websiteId!=null)){laScriptObj.visitorName=resultCookie.V_N;laScriptObj.visitorId=resultCookie.V_I;if(resultCookie.Session!=undefined&&(document.referrer!=""&&window.location!=document.referrer))
WGVisitor.InsertTrackingInformation(laScriptObj.visitorId);WGVisitor.getBlockIP(laScriptObj.visitorId,laScriptObj.websiteId)}}else{laScriptObj.websiteId=newresultServer.W_I;laScriptObj.priorityLanguage=newresultServer.P_L;laScriptObj.timeZone=newresultServer.T_Z;var webArrayOfObjects="{'W_I':"+"'"+newresultServer.W_I+"'"+",'P_L':"+"'"+newresultServer.P_L+"'"+",'T_Z':"+"'"+newresultServer.T_Z+"'"+"}";laScriptObj.createCookie("WG_WEB",null,-24);laScriptObj.createCookie("WG_WEB",webArrayOfObjects,720);var setId=WGVisitor.InsertVisitorIdOnly()}}}},StartChatProcess:function(){if(!laScriptObj.isAlreadyInChat)
if(laScriptObj.GUID!=null){var resultC=laScriptObj.readCookieJson("WG_WEB");var visitorIdURL="parS"+"!";visitorIdURL+=escape(laScriptObj.GUID);visitorIdURL+="~"+"parD"+"!";visitorIdURL+=laScriptObj.host;visitorIdURL+="~"+"parIsNew"+"!";if(laScriptObj!=null&&(laScriptObj.visitorId!=""&&laScriptObj.GUID==""))
visitorIdURL+="true";else
visitorIdURL+="false";visitorIdURL+="~parWI!";visitorIdURL+=laScriptObj.websiteId;visitorIdURL+="~parVI!";visitorIdURL+=laScriptObj.visitorId;visitorIdURL+="~parTZ!";visitorIdURL+=laScriptObj.timeZone;visitorIdURL+="~parLI!";if(laScriptObj.priorityLanguage=="")
visitorIdURL+=resultC.P_L;else
visitorIdURL+=laScriptObj.priorityLanguage;visitorIdURL+="~"+laScriptObj.parRandmStr+"!";visitorIdURL+=laScriptObj.getRandomValue();visitorIdURL+="~"+laScriptObj.getMethodStr+"!WGWebsite.onGetChatPrerequisiteResponse";if(typeof WGWindowConstant.claimChatEnabled!="undefined"&&WGWindowConstant.claimChatEnabled){laScriptObj.getJsonServiceResponse("ChatPreByLanClaim","WGWebsite.onGetChatPrerequisiteResponse",visitorIdURL)}else{laScriptObj.getJsonServiceResponse("ChatPreLang","WGWebsite.onGetChatPrerequisiteResponse",visitorIdURL)}}},ReadValueResponse:function(result){if(typeof WGWindowConstant.blockChat!="undefined"&&WGWindowConstant.blockPages.indexOf(window.location.host+window.location.pathname)>-1)
return false;if(result!=null&&result!=""){var resultCookie=laScriptObj.readCookie("CD");if(resultCookie==null||typeof resultCookie=="undefined"){laScriptObj.SessionCookie=null;laScriptObj.SessionCookie="";laScriptObj.createCookie(laScriptObj.LC_VIC,null,-24);var cdArrayOfObjects=result;laScriptObj.createCookie("CD",cdArrayOfObjects,720)}else if(result!=resultCookie){laScriptObj.SessionCookie="";laScriptObj.createCookie("CD",null,-24);laScriptObj.createCookie(laScriptObj.LC_VIC,null,-24);var cdArrayOfObjects=result;laScriptObj.createCookie("CD",cdArrayOfObjects,720)}}
var resultCookie=laScriptObj.readCookieJson(laScriptObj.LC_VIC);if(resultCookie!=null&&typeof resultCookie.Session!="undefined")
laScriptObj.SessionCookie=resultCookie.Session;laScriptObj.referrer=laScriptObj.getReferrer();laScriptObj.refDomain=laScriptObj.getDomainName(laScriptObj.referrer);if(laScriptObj.refDomain!=location.hostname||(laScriptObj.refDomain==""||laScriptObj.readCookie(laScriptObj.LC_CEC)==null))
if(typeof WGWindowConstant.LC_Subdomain!="undefined"&&WGWindowConstant.LC_Subdomain){if(laScriptObj.refDomain==""||(WGWindowConstant.subPages.indexOf(laScriptObj.refDomain)<-1||laScriptObj.readCookie(laScriptObj.LC_CEC)==null))
laScriptObj.statusErased=true}else
laScriptObj.statusErased=true;if(typeof WGWindowConstant._isPageBased!="undefined"&&WGWindowConstant._isPageBased){laScriptObj.websiteId=WGWindowConstant._websiteId;laScriptObj.host=WGWindowConstant.host}
if(laScriptObj.SessionCookie!=null&&laScriptObj.SessionCookie!="")
if(typeof WGWindowConstant._isPageBased!="undefined"&&WGWindowConstant._isPageBased){laScriptObj.websiteId=WGWindowConstant._websiteId;laScriptObj.host=WGWindowConstant.host;laScriptObj.onGetWebsiteIDResponseOnly(laScriptObj.websiteId)}else{var websiteIdURL="parD!";websiteIdURL+=escape(laScriptObj.host);websiteIdURL+="~"+laScriptObj.parRandmStr+"!";websiteIdURL+=laScriptObj.getRandomValue();websiteIdURL+="~"+laScriptObj.getMethodStr+"!laScriptObj.onGetWebsiteIDResponseOnly";laScriptObj.getJsonServiceResponse("GetWI","laScriptObj.onGetWebsiteIDResponseOnly",websiteIdURL)}
else{var websiteIdURL="parD!";websiteIdURL+=escape(laScriptObj.host);websiteIdURL+="~"+laScriptObj.parRandmStr+"!";websiteIdURL+=laScriptObj.getRandomValue();websiteIdURL+="~"+laScriptObj.getMethodStr+"!laScriptObj.onGetWebsiteIDResponse";laScriptObj.getJsonServiceResponse("GetWI","laScriptObj.onGetWebsiteIDResponse",websiteIdURL)}},unBlockKey:function(){var d=new Date;laScriptObj.unblock=true},BlockKey:function(){var d=new Date;laScriptObj.MsgWin.value="";setTimeout("laScriptObj.unBlockKey()",500)},onKeyPressFunc:function(){if(laScriptObj.MsgWin.value.toString().length>=600){var tmpMessage=laScriptObj.MsgWin.value.toString();laScriptObj.MsgWin.value=tmpMessage.substr(0,600)}
if(laScriptObj.unblock){var messageSender=WGChat.SendChatMessage();laScriptObj.unblock=false;laScriptObj.BlockKey()}},sendXmppChatDestroy:function(){document.getElementById("live_chat_status").style.display="block";laScriptObj.createCookie("minimizeMessages",0,1);WGWindowLoader.laJquery(".newIspyVehicles").css("display","none");WGWindowLoader.laJquery(".newIspyVehicles").html("");document.getElementById("newOnlineBtn").style.display="none";var node=document.getElementById("txtChatWin");laScriptObj.XMPPConnectedRetry=true;var now=new Date;var utc=now.toUTCString().replace("UTC","GMT");var x=document.getElementById("ChatDiv");if(x.style.display=="block")
x.style.display="none";if(laScriptObj.room!=null){WGChat.CloseChatWindow(true);laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:"true",user_id:0,manager_id:0,time_stamp:WGChat.myUTCDateString(now),website_id:laScriptObj.websiteId,visitor_name:laScriptObj.visitorName,end_time:"true",type:"groupchat"}).c("body").t("[destroy room]"));var conn=laScriptObj.connection;conn.sync=true;var msg=$pres({to:laScriptObj.room,type:"unavailable"});conn.send(msg.tree());conn.flush();conn.disconnect()}else{if(laScriptObj.IsConnecting){var conn=laScriptObj.connection;conn.sync=true;conn.flush();conn.disconnect()}
WGChat.CloseChatWindow(false)}
while(laScriptObj.ArrayUsers.length)
laScriptObj.ArrayUsers.pop();laScriptObj.dataAddUsers=0;hide=false;if(sessionStorage.getItem("lastActivity"))
setTimeout(function(){if(typeof Mascot!="undefined")
Mascot.showMascot()},3E3)},txtFocusing:function(){var input=laScriptObj.MsgWin;if(!laScriptObj.firstKey){laScriptObj.connect(WGWindowConstant.XMPP_SERVER,"123");laScriptObj.firstKey=true}},MainThread:function(){laScriptObj.getJsonServiceResponse("ReadValue","laScriptObj.ReadValueResponse","method!laScriptObj.ReadValueResponse")},getJsonServiceResponse:function(WGSFunc,CBFunc,PRAMFunc){var JsonData="{";var parmLong=PRAMFunc.split("~");for(var i=0;i<parmLong.length;i++){var parmShort=parmLong[i].split("!");JsonData=JsonData+'"'+parmShort[0]+'":"'+parmShort[1]+'",'}
JsonData=JsonData.substring(0,JsonData.lastIndexOf(","));JsonData=JsonData+"}";WGWindowLoader.laJquery.ajax({type:"GET",url:WGWindowConstant._chatURL+WGSFunc+"?callback=?",data:JSON.parse(JsonData),jsonp:CBFunc,dataType:"jsonp",crossDomain:true,success:CBFunc,cache:false,error:function(jqXHR,textStatus,errorThrown){}})},}
var myLanguages={english:{"form-title-text":"Live Chat is unavailable at the moment. Please leave a message.","offlineName":"Full Name *","offlineEmail":"Email Address *","offlinePhone":"Phone *","offlineMessage":"Message","laForm-form-title span":"Offline Form","submit":"SUBMIT","nameError":"Required: Please enter your name","emailError":"Required: Please enter your email address","emailSyntaxError":"Email address is invalid","commentError":"Required: Please enter contact number","warning":"Special characters are not allowed in message","spaces":"Spaces are not allowed in message","offlineThankMsg":"Thank you for filling out your information. We have received your message and someone from our team will get in touch with you shortly"},french:{"form-title-text":"Le service de clavardage n'est pas disponible pour le moment, s'il vous plait laissez un message.","offlineName":"Nom complet *","offlineEmail":"Adresse Email *","offlinePhone":"Telephone *","offlineMessage":"Message","laForm-form-title span":"Formulaire hors ligne","submit":"Envoyer","nameError":"Champs obligatoire: Entrer votre nom","emailError":"Champs obligatoire: Entrer votre Email","emailSyntaxError":"Email invalide","commentError":"Champs obligatoire : Entrer votre numero de telephone","warning":"Pas de caractÃƒÂ¨res spÃƒÂ©ciaux dans le dans le nom dÃ¢â‚¬â„¢utilisateur.","spaces":"Les espaces ne sont pas autorisÃƒÂ©s dans le nom dÃ¢â‚¬â„¢utilisateur.","offlineThankMsg":"Merci dÃ¢â‚¬â„¢avoir partagÃƒÂ© vos informations. Nous en avons pris note et un membre de notre equipe vous reviendra sous peu."},german:{"form-title-text":"Live Chat ist gerade nicht zu erreichen. Bitte hinterlassen Sie uns eine Nachricht.","offlineName":"VollstÃƒÂ¤ndiger Name *","offlineEmail":"E-Mail Adresse *","offlinePhone":"Telefonnummer *","offlineMessage":"Nachricht","laForm-form-title span":"Offline Kontaktformular","submit":"Senden","nameError":"BenÃƒÂ¶tigt: Bitte geben Sie hier Ihren Namen ein","emailError":"BenÃƒÂ¶tigt: Bitte geben Sie hier Ihren E-Mail Adresse ein","emailSyntaxError":"E-Mail Adresse ist ungÃƒÂ¼ltig","commentError":"Bitte geben Sie hier Ihre Telefonnummer an","warning":"Sonderzeichen sind nicht erlaubt bei Benutzername","spaces":"Leerzeichen sind nicht erlaubt bei Benutzername","offlineThankMsg":"Vielen Dank fÃƒÂ¼r das AusfÃƒÂ¼llen des Kontaktformulars. Wir haben Ihre Nachricht erhalten und es wird sich jemand aus unserem Team bei Ihnen zeitnahe melden."},spanish:{"form-title-text":"El Servicio de Live Chat no estÃƒÂ¡ disponible de momento Por favor, dÃƒÂ©jenos un mensaje","offlineName":"Nombre Completo *","offlineEmail":"Correo ElectrÃƒÂ³nico *","offlinePhone":"TelÃƒÂ©fono *","offlineMessage":"Mensaje","laForm-form-title span":"Forma sin conexiÃƒÂ³n","submit":"enviar","nameError":"Obligatorio: Nombre","emailError":"Obligatorio: Correo ElectrÃƒÂ³nico","emailSyntaxError":"Correo ElectrÃƒÂ³nico No VÃƒÂ¡lido","commentError":"Obligatorio: TelÃƒÂ©fono","warning":"No Se Admite Caracteres Especiales En Nombre De Usuario","spaces":"No Se Admite Espacio En Nombre De Usuario","offlineThankMsg":"Gracias Por Completar Su InformaciÃƒÂ³n. Mensaje Enviado Con Ãƒâ€°xito,Alguien Se PondrÃƒÂ¡ En Contacto Con Usted En Breve"},arabic:{"form-title-text":".الدردشة الحية غير متوفرة في الوقت الراهن. يرجى ترك رسالة","offlineName":"* الاسم الكامل","offlineEmail":"* عنوان البريد الإلكتروني","offlinePhone":"* هاتف","offlineMessage":"الرسالة","laForm-form-title span":"نموذج متواجد حاليا","submit":"عرض","nameError":"المطلوب: الرجاء إدخال اسمك","emailError":"المطلوب: الرجاء إدخال عنوان البريد الإلكتروني الخاص بك","emailSyntaxError":"عنوان البريد الإلكتروني غير صالح","commentError":"المطلوب: الرجاء إدخال رقم الاتصال","warning":"لا يسمح أحرف خاصة في اسم المستخدم","spaces":"لا يسمح مسافات في اسم المستخدم","offlineThankMsg":"شكرا لملء المعلومات الخاصة بك. لقد تلقينا الرسالة وشخص من فريق العمل لدينا سوف تحصل على اتصال معكم قريبا"}};var langArray=["","english","","french","german","arabic","spanish"];var spaceRemoved;function ValidateOfflineContactForm(){var name=document.getElementById("offlineName");var email=document.getElementById("offlineEmail");var phone=document.getElementById("offlinePhone");var phoneVal=WGWindowLoader.laJquery("#offphone").val(),intRegex=/[0-9 -()+]+$/;if(name.value==""||name.value.trim()==""){spaceRemoved=name.value.replace(/\s+/g,"");name.value=spaceRemoved;document.getElementById("nameError").style.display="block";name.style.border="1px solid red";phone.style.border="0px solid white";email.style.border="0px solid white";document.getElementById("emailSyntaxError").style.display="none";document.getElementById("commentError").style.display="none";document.getElementById("emailError").style.display="none";name.focus();return false}else{document.getElementById("nameError").style.display="none";name.style.border="0px solid white"}
if(email.value==""||email.value.trim()==""){spaceRemoved=email.value.replace(/\s+/g,"");email.value=spaceRemoved;document.getElementById("emailError").style.display="block";document.getElementById("emailSyntaxError").style.display="none";email.style.border="1px solid red";name.style.border="1px solid white";phone.style.border="0px solid white";document.getElementById("nameError").style.display="none";document.getElementById("commentError").style.display="none";email.focus();return false}else{document.getElementById("emailError").style.display="none";email.style.border="1px solid #b0b6c8"}
if(email.value.indexOf("@",0)<0){document.getElementById("emailError").style.display="none";document.getElementById("emailSyntaxError").style.display="block";email.style.border="1px solid red";name.style.border="1px solid white";phone.style.border="0px solid white";document.getElementById("nameError").style.display="none";document.getElementById("commentError").style.display="none";email.focus();return false}else{document.getElementById("emailSyntaxError").style.display="none";email.style.border="1px solid #b0b6c8"}
if(email.value.indexOf(".",0)<0){document.getElementById("emailError").style.display="none";document.getElementById("emailSyntaxError").style.display="block";email.style.border="1px solid red";name.style.border="1px solid white";phone.style.border="0px solid white";document.getElementById("nameError").style.display="none";document.getElementById("commentError").style.display="none";email.focus();return false}else{document.getElementById("emailSyntaxError").style.display="none";email.style.border="1px solid #b0b6c8"}
if(phone.value==""||phone.value.trim()==""){spaceRemoved=phone.value.replace(/\s+/g,"");phone.value=spaceRemoved;document.getElementById("commentError").style.display="block";phone.style.border="1px solid red";email.style.border="1px solid white";name.style.border="1px solid white";document.getElementById("nameError").style.display="none";document.getElementById("emailError").style.display="none";document.getElementById("emailSyntaxError").style.display="none";phone.focus();return false}else{document.getElementById("commentError").style.display="none";phone.style.border="1px solid #b0b6c8"}
return true}
if(typeof WGWindowConstant.LC_Subdomain!="undefined"&&WGWindowConstant.LC_Subdomain)
laScriptObj.host=WGWindowConstant.WG_Domain.split(".")[1]+"."+WGWindowConstant.WG_Domain.split(".")[2];WGWindowConstant.blockCounter=false;WGWindowConstant.currentCounter=0;var minimizeButtonImg=WGWindowLoader.laJquery("#newOnlineBtn img").attr("src");try{localStorage.setItem("newonlinebtnimg",WGWindowLoader.laJquery("#newOnlineBtn img").attr("src"))}catch(e){}
if(WGWindowConstant.XMPP_SERVICE.indexOf("thechatsoftware.com/http-bind/")>-1)
WGWindowConstant.XMPP_SERVICE="://thechatsoftware.com/http-bind/";function getInternetExplorerVersion(){var rv=-1;if(navigator.appName=="Microsoft Internet Explorer"){var ua=navigator.userAgent;var re=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(re.exec(ua)!=null)
rv=parseFloat(RegExp.$1)}
return rv}
if(getInternetExplorerVersion()>-1)
if(location.href.toString().indexOf("https")>-1)
WGWindowConstant.XMPP_SERVICE="https"+WGWindowConstant.XMPP_SERVICE;else
WGWindowConstant.XMPP_SERVICE="http"+WGWindowConstant.XMPP_SERVICE;else
WGWindowConstant.XMPP_SERVICE="https"+WGWindowConstant.XMPP_SERVICE;WGWindowLoader.chat=window.WGWindowLoader.laJquery.connection.chatHub;window.WGWindowLoader.laJquery.connection.hub.logging=false;var ua=navigator.userAgent.toLowerCase();var dBrowser={ua:navigator.userAgent.toLowerCase(),width:window.innerWidth>0?window.innerWidth:screen.width,height:window.innerHeight>0?window.innerHeight:screen.height,tablets:["nexus 7","nexus 10"],tabletName:"",isMobile:function(){if(dBrowser.ua.indexOf("mobile")!=-1)
return true;else
return false},isAndroid:function(){if(dBrowser.ua.indexOf("android")!=-1)
return true;else
return false},isAndroidTablet:function(){var length=dBrowser.tablets.length;var isTablet=false;if(dBrowser.ua.indexOf("tablet")!=-1)
isTablet=true;else if(dBrowser.ua.indexOf("android")&&!dBrowser.isMobile())
isTablet=true;else
for(var i=0;i<length;i++)
if(dBrowser.ua.indexOf(dBrowser.tablets[i])!=-1){isTablet=true;dBrowser.tabletName=dBrowser.tablets[i]}
if(dBrowser.ua.indexOf("android")!=-1&&isTablet)
return true;else
return false},isIpad:function(){if(dBrowser.ua.indexOf("ipad")!=-1)
return true;else
return false},isIphone:function(){if(dBrowser.ua.indexOf("iphone")!=-1)
return true;else
return false},isWindows:function(){if(dBrowser.ua.indexOf("windows")!=-1)
return true;else
return false},isMac:function(){if(dBrowser.ua.indexOf("macintosh")!=-1)
return true;else
return false},isFF:function(){if(dBrowser.ua.indexOf("firefox")!=-1||dBrowser.ua.indexOf("fxios")!=-1)
return true;else
return false},isChrome:function(){if(dBrowser.ua.indexOf("chrome")!=-1||dBrowser.ua.indexOf("crios")!=-1)
if(dBrowser.isEdge()||dBrowser.isOpera())
return false;else
return true;else
return false},isEdge:function(){if(dBrowser.ua.indexOf("edge")!=-1)
return true;else
return false},isOpera:function(){if(dBrowser.ua.indexOf("opr")!=-1||dBrowser.ua.indexOf("opios")!=-1)
return true;else
return false},isSafari:function(){if(dBrowser.ua.indexOf("safari")!=-1)
if(dBrowser.isChrome()||dBrowser.isEdge()||dBrowser.isOpera()||dBrowser.isFF())
return false;else
return true;else
return false},isIE:function(){if(dBrowser.ua.indexOf("msie")!=-1||dBrowser.ua.indexOf("trident")!=-1)
return true;else
return false},isIE11:function(){if(dBrowser.ua.indexOf("rv:11")!=-1&&dBrowser.ua.indexOf("trident")!=-1)
return true;else
return false},isIE10:function(){if(dBrowser.ua.indexOf("msie 10")!=-1)
return true;else
return false},isIE9:function(){if(dBrowser.ua.indexOf("msie 9")!=-1)
return true;else
return false},isIE8:function(){if(dBrowser.ua.indexOf("msie 8")!=-1)
return true;else
return false},isIE7:function(){if(dBrowser.ua.indexOf("msie 7")!=-1)
return true;else
return false},isIE6:function(){if(dBrowser.ua.indexOf("msie 6")!=-1)
return true;else
return false},is64:function(){if(dBrowser.ua.indexOf("wow64")!=-1||dBrowser.ua.indexOf("win64")!=-1)
return true}};window.WGWindowLoader.laJquery.connection.hub.url="https://blue.thelivechatsoftware.com/signalrserver/signalr/hubs";var wgAlertSound={setSource:function(){var audio=document.getElementById("alertRingDiv");if(typeof audio!="undefined")
if((dBrowser.isIE8()||dBrowser.isSafari())&&dBrowser.isWindows());else if(audio.src==window.location.protocol+"//cdn.thelivechatsoftware.com/Uploads/alertRing.mp3"){if(typeof audio.play=="function")
audio.play()}else
audio.src=window.location.protocol+"//cdn.thelivechatsoftware.com/Uploads/alertRing.mp3"},mediaPlaybackRequiresUserGesture:function(){var audio=document.createElement("audio");if(typeof play=="function"){audio.play();return audio.paused}},removeBehaviorsRestrictions:function(){var audio=document.getElementById("alertRingDiv");if(typeof audio!="undefined")
audio.load();window.removeEventListener("touchstart",wgAlertSound.removeBehaviorsRestrictions)},setMuteSettings:function(){wgAlertSound.muteSound=true;WGWindowLoader.laJquery("#soundCheck").removeClass("fa-bell");WGWindowLoader.laJquery("#soundCheck").addClass("fa-bell-slash");try{localStorage.setItem(wgAlertSound.key,"mute")}catch(e$0){}},setUnMuteSettings:function(){wgAlertSound.muteSound=false;WGWindowLoader.laJquery("#soundCheck").removeClass("fa-bell-slash");WGWindowLoader.laJquery("#soundCheck").addClass("fa-bell");try{localStorage.setItem(wgAlertSound.key,"unmute")}catch(e$1){}},muteSound:false,audioString:'<audio id="alertRingDiv" controls autoplay  style="display:none;" preload ></audio>',key:WGWindowConstant._websiteId+"muteSound"};if(typeof WGWindowConstant.alertSound!="undefined"&&WGWindowConstant.alertSound)
WGWindowLoader.laJquery("body").append(wgAlertSound.audioString);if((dBrowser.isIE8()||dBrowser.isSafari())&&dBrowser.isWindows())
WGWindowLoader.laJquery("#soundCheckDiv").css("display","none");else if(wgAlertSound.mediaPlaybackRequiresUserGesture())
window.addEventListener("touchstart",wgAlertSound.removeBehaviorsRestrictions);if(localStorage.getItem(wgAlertSound.key)=="mute")
wgAlertSound.setMuteSettings();else if(localStorage.getItem(wgAlertSound.key)=="unmute")
wgAlertSound.setUnMuteSettings();WGWindowLoader.laJquery("#soundCheckDiv").click(function(){if(WGWindowLoader.laJquery("#soundCheck").hasClass("fa-bell"))
wgAlertSound.setMuteSettings();else
wgAlertSound.setUnMuteSettings()});var hideMyWIndowVar;var animStop=!0;function bubbleAppear(){if(animStop){animStop=!0,document.getElementById("bubble").style.display="block",WGWindowLoader.laJquery("#bubble").animate({left:"74px"},1E3);var e=document.getElementById("greetInnerMsg");e.innerHTML=laScriptObj.autoGreetMessage}else{document.getElementById("bubble").style.display="none";hideOnLoad()}}
function docked(){WGWindowLoader.laJquery("#bubble").animate({left:"-196px"},1E3)}
function hideGreetBubble(){document.getElementById("bubble").style.display="none"}
function hideOnLoad(){animStop=!1,document.getElementById("bubble").style.display="none"}
function hideMyWindow(){}
var DomStyle={set:function(e,t,n){var o=document.getElementById(e);"undefined"!=typeof o&&WGWindowLoader.laJquery("#"+e).css(t,n)},get:function(e){var t=document.getElementById(e);return"undefined"!=typeof t?t:void 0},getStyle:function(e,t){var n=document.getElementById(e);return"undefined"!=typeof n?WGWindowLoader.laJquery("#"+e).css(t):void 0}};window.setTimeout(docked,16E3),window.setTimeout(hideGreetBubble,16900);var viewportTag;viewportTag=document.querySelector("meta[name=viewport]");CreateIframeAdWords=function(a,b){b+=escape(a);var c=document.createElement("IFRAME");c.setAttribute("src",b),c.style.border="none",c.style.width="0px",c.style.height="0px",document.body.appendChild(c)};var WGVisitor={InsertVisitorIdOnlyMethod:"InVsIn",GetVisitorIdforSessionId:"GetVisitorIdforSessionId",visitorId:"visitorId",InsertTrackingInformation:function(e){laScriptObj.getJsonServiceResponse("InTrIn","","parVI!"+e+"~parWI!"+laScriptObj.websiteId+"~parWU!"+laScriptObj.ReplaceSpecialCharacters(window.location.toString()))},InsertVisitorIdOnlyResponse:function(e){if(null!=e&&""!=e)
var t=WGWindowLoader.laJquery.parseJSON(e);laScriptObj.visitorId=t.V_I,laScriptObj.visitorName=t.V_N,laScriptObj.GUID=t.S_I;var n="{'V_N':'"+t.V_N+"','V_I':'"+t.V_I+"','Session':'"+t.S_I+"'}";laScriptObj.createCookie(laScriptObj.LC_VIC,null,-1),laScriptObj.createCookie(laScriptObj.LC_VIC,n,720),this.InsertTrackingInformation(t.V_I),this.getBlockIP(laScriptObj.visitorId,laScriptObj.websiteId);if(typeof getData!="undefined")
getData(WGWindowLoader.laJquery)},InsertVisitorIdOnly:function(){laScriptObj.getJsonServiceResponse(this.InsertVisitorIdOnlyMethod,"WGVisitor.InsertVisitorIdOnlyResponse","parVI!"+this.visitorId+"~parWI!"+laScriptObj.websiteId+"~method!"+laScriptObj.ReplaceSpecialCharacters(window.location.toString())+"~parRef!"+laScriptObj.ReplaceSpecialCharacters(document.referrer)+"~parWU!"+laScriptObj.ReplaceSpecialCharacters(window.location.toString())+"~"+laScriptObj.getMethodStr+"!WGVisitor.InsertVisitorIdOnlyResponse")},getBlockIP:function(e,t){var n="parVI!";n+=e,n+="~parWI!",n+=t;var o=new Date;n+="~parR!",n+=o.getTime().toString(),n+="~method!WGVisitor.onGetWebsiteBlockedIPAddressResponse",laScriptObj.getJsonServiceResponse("IsWbBl","WGVisitor.onGetWebsiteBlockedIPAddressResponse",n)},onGetUserOnMinimumChatsResponse:function(e){if(null!=e){var t=null,n=null;if(""!=e)
if("undefined"!=typeof LC_textStatus&&LC_textStatus)
document.getElementById("live_chat_status").setAttribute("href","javascript:liveChatGreet('Passive')");else{if(null==document.getElementById("live_chat_img")){if("undefined"==typeof lc_img_anchor){var n=document.createElement("a");n.setAttribute("href","javascript:WGWebsite.liveChatGreet('Passive')"),n.style.border="none",n.style.display="block"}else
t=document.getElementById("live_chat_anchor");var o=document.getElementById("live_chat_status"),i=document.createElement("img");i.style.border="none",i.setAttribute("id","live_chat_img"),i.setAttribute("src",WGWindowConstant._imageURL+LC_onlineImg),"undefined"==typeof lc_img_anchor?(n.appendChild(i),o.appendChild(n)):t.appendChild(i)}}
else if("undefined"!=typeof LC_textStatus&&LC_textStatus)
document.getElementById("live_chat_status").setAttribute("href","javascript:WG_OnOfflineClick()"),hideOnLoad();else if(null==document.getElementById("live_chat_img")){if("undefined"==typeof lc_img_anchor){var n=document.createElement("a");n.setAttribute("href","javascript:WGWebsite.WG_OnOfflineClick()"),hideOnLoad(),n.style.border="none"}else
t=document.getElementById("live_chat_anchor");var o=document.getElementById(liveChatStatus),i=document.createElement("img");i.style.border="none",i.setAttribute("id","live_chat_img"),i.setAttribute("src",WGWindowConstant._imageURL+
LC_onlineImg),i.style.display="block","undefined"==typeof lc_img_anchor?(n.appendChild(i),o.appendChild(n)):t.appendChild(i)}}},onGetWebsiteBlockedIPAddressResponse:function(a){0<parseInt(a)&&(laScriptObj.IPBlocked=!0,laScriptObj.createCookie(laScriptObj.LC_IGN,1,3600));a=laScriptObj.readCookie(laScriptObj.LC_DND);var c=laScriptObj.readCookie(laScriptObj.LC_IGN);!laScriptObj.statusErased||void 0!=a&&null!=a&&"WG_DND=2"!=a||void 0!=c&&null!=c?null==c&&(getUsernameServiceURL="parD!",getUsernameServiceURL+=laScriptObj.host,getUsernameServiceURL+="~parL!",getUsernameServiceURL+="0",getUsernameServiceURL+="~"+laScriptObj.parRandmStr+"!",getUsernameServiceURL+=laScriptObj.getRandomValue(),getUsernameServiceURL+="~"+laScriptObj.getMethodStr+"!WGVisitor.onGetUserOnMinimumChatsResponse",laScriptObj.getJsonServiceResponse("GetUOnMiChatsByLan","WGVisitor.onGetUserOnMinimumChatsResponse",getUsernameServiceURL)):laScriptObj.StartChatProcess()},chatRating:function(e,t){setTimeout(function(){document.getElementById("rateText").style.display="none"},955E3),document.getElementById("upBTN").style.display="none",document.getElementById("downBTN").style.display="none",document.getElementById("rateText").innerHTML="Thank You";var n="parCI!"+laScriptObj.chatId+"~parRI!"+e+"~parComments!"+t+"~parR!"+Math.floor(Math.random());laScriptObj.getJsonServiceResponse("InPostSurvey","",n)}},WGWebsite={ChatWin:document.getElementById("txtChatWin"),checkIsURL:function(e){var t="",n=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(n.test(e)){var o=e.match(n);return t=o[0].toString()}
return""},opChatLinking:function(e,t,bool){if(typeof WGWindowLoader.readCookie("opName")=="undefined"){WGWindowLoader.createCookie("opName",e,720);}
if(!laScriptObj.isAlreadyInChat&&typeof WGWindowLoader.readCookie("opName")!="undefined"){if(e!=WGWindowLoader.readCookie("opName")){WGWindowLoader.createCookie("opName",e,720);}}
if(laScriptObj.EMP!=""&&laScriptObj.EMP=="01"&&laScriptObj.actualUserIdCustom!="4886"){laScriptObj.FirstMessageByVisitor="";laScriptObj.LastMessageBy="Operator";laScriptObj.OperatorMessageCounter++;clearTimeout(laScriptObj.OperatorMessageCounterReply);clearTimeout(laScriptObj.OperatorMessageCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply3);}
var newSrc=minimizeButtonImg.replace(".gif","-blink.gif");if(typeof WGWindowConstant.alertSound!="undefined"&&WGWindowConstant.alertSound)
if(!wgAlertSound.muteSound)
if(navigator.userAgent.search("Mobile")>-1&&navigator.userAgent.search("Chrome")>-1||navigator.userAgent.match(/iPad/i)>-1||navigator.userAgent.match(/iPhone/i)>-1)
wgAlertSound.setSource();else{var audioAlert=new Audio(window.location.protocol+"//cdn.thelivechatsoftware.com/Uploads/alertRing.mp3");if(typeof audioAlert.play=="function")
audioAlert.play()}"undefined"!=typeof WGWindowConstant.SName&&WGWindowConstant.SName&&(e=WGWindowConstant.mySName[laScriptObj.randomnumber],laScriptObj.userSName=e,"undefined"!=typeof WGWindowConstant.SPic&&WGWindowConstant.SPic&&(document.getElementById("opImage").src=WGWindowConstant.opPath+WGWindowConstant.mySName[laScriptObj.randomnumber]+".png")),t=t.replace(/^\s+|\s+$/g,"");var n;n=document.getElementById("opDiv").cloneNode(!0),laScriptObj.vstrCount++;if(laScriptObj.isAlreadyInChat)
n.className="opDivMsg";n.id=laScriptObj.vstrCount,opnameNew=document.getElementById("opname").cloneNode(!0),opnameNew.id="New"+document.getElementById("opname").id,opnameNew.style.verticalAlign="top",opconvNew=document.getElementById("opconv").cloneNode(!0),opconvNew.id="New"+document.getElementById("opconv").id,opconvNew.style.verticalAlign="top",opnameNew.innerHTML="",opconvNew.innerHTML="",opnameNew.innerHTML=e+": ",opconvNew.innerHTML=t,n.appendChild(opnameNew);var o=opconvNew.innerHTML.toString(),i=o.indexOf("http"),a="";if(i>=0){var d=o.split(" ");for(c=0;c<d.length;c++)
if(""==WGWebsite.checkIsURL(d[c].toString()))
a+=" "+d[c].toString()+" ";else{var r='<a id="linkChatOp" target="_blank" position="absolute" href=" '+d[c].toString()+' " style="text-decoration:underline;color:blue;"  >'+d[c].toString()+"</a>";a+=" "+r}
opconvNew.innerHTML=a,n.appendChild(opconvNew)}else{if(null!=document.getElementById("emoticonDiv"))
for(var s=o,l=o.length,W=0;l>W;W++)
for(var c=0;6>c;c++){var m=s.indexOf(signs[c]);if(-1!==m){s=s.replace(signs[c],"K");var u="<img id='smilies' src=\""+imgs[c]+'" style="margin-top: -4px;vertical-align:top;" title=" '+txts[c]+' " >';o=o.replace(signs[c]," "+u+" ");break}}
opconvNew.innerHTML=o,n.appendChild(opconvNew),"undefined"!=typeof _liveBtnHide&&_liveBtnHide&&"block"==document.getElementById("btnRightHide").style.display&&(document.getElementById("mininewstatus").style.display="block")}
if(this.ChatWin.appendChild(n),this.ChatWin.scrollTop=this.ChatWin.scrollHeight,"undefined"!=typeof minCheck&&1==minCheck&&(navigator.userAgent.match(/Windows/i)||navigator.userAgent.match(/iPad/i)||-1==navigator.userAgent.search("Mobile")&&navigator.userAgent.match(/Android/i))){var g=mindiv_img.replace(".gif","_blink.gif");DomStyle.set("minDiv","background",g),minCheck=!1}
laScriptObj.isAlreadyInChat&&(clearTimeout(laScriptObj.hideMyWIndowVar),laScriptObj.hideMyWIndowVar=setTimeout("hideMyWindow()",44E4));if(laScriptObj.isAlreadyInChat)
if(laScriptObj.readCookie("minimizeCookie")=="0"||laScriptObj.readCookie("minimizeCookie")==0){var newCount=WGWindowLoader.laJquery(".opDivMsg").length;laScriptObj.createCookie("minimizeMessages",newCount,1);WGWindowLoader.laJquery(".newIspyVehicles").css("display","none");WGWindowLoader.laJquery("#newOnlineBtn").css("display","none")}else{WGWindowLoader.laJquery('.our-chat-button').attr('onclick',"javascript:OnOff()");var oldminimizeButtonImg=WGWindowLoader.laJquery("#newOnlineBtn img").attr("src");var val=0;if(typeof laScriptObj.readCookie("minimizeMessages")!="undefined")
val=laScriptObj.readCookie("minimizeMessages");else
laScriptObj.createCookie("minimizeMessages",0,1);var newCount=WGWindowLoader.laJquery(".opDivMsg").length-val;if(newCount>0){WGWindowLoader.laJquery(".newIspyVehicles").css("display","block");WGWindowLoader.laJquery(".newIspyVehicles").html(newCount);WGWindowLoader.laJquery('img[src="'+oldminimizeButtonImg+'"]').attr("src",newSrc)}else{WGWindowLoader.laJquery(".newIspyVehicles").css("display","none");WGWindowLoader.laJquery(".newIspyVehicles").html("")}}},WG_OnOfflineClick:function(){offlineBtnClicked=true;chatminimized=false;laScriptObj.createCookie("minimizeCookie",null,-24);laScriptObj.createCookie("minimizeMessages",null,-24);localStorage.removeItem("newonlinebtnimg");WGWindowLoader.laJquery("#newOnlineBtn").css("display","none");if(typeof offlineFormNew!="undefined"){laScriptObj.StartChatProcess();for(var i in myLanguages[langArray[laScriptObj.priorityLanguage]])
if(i=="offlineName"||i=="offlineEmail"||i=="offlinePhone"||i=="offlineMessage")
WGWindowLoader.laJquery("#offline-form-container #"+i).attr("placeholder",myLanguages[langArray[laScriptObj.priorityLanguage]][i]);else{if(i=="warning"||i=="spaces")
WGWindowLoader.laJquery("#offline-form-container ."+i).text(myLanguages[langArray[laScriptObj.priorityLanguage]][i]);else
WGWindowLoader.laJquery("#offline-form-container #"+i).text(myLanguages[langArray[laScriptObj.priorityLanguage]][i]);if(i=="submit")
WGWindowLoader.laJquery("#offline-form-container #"+
i).val(myLanguages[langArray[laScriptObj.priorityLanguage]][i])}
if(laScriptObj.priorityLanguage=="5"){WGWindowLoader.laJquery("#offline-form-container label").css("float","right");WGWindowLoader.laJquery("#offline-form-container #offlineName,#offline-form-container  #offlineEmail,#offline-form-container  #offlinePhone, #offline-form-container textarea, #nameError, #emailError, #commentError, #emailSyntaxError, .warning").css("textAlign","right")}}else"undefined"!=typeof clientOffline&&clientOffline?window.open(WGWindowConstant._offlineURL,"_self"):window.open(WGWindowConstant._offlineURL+"?websiteId="+laScriptObj.websiteId+"&MySession=Session="+laScriptObj.GUID,"_blank","menubar=0,resizable=0,width=770,height=450,scrollbars=0")},showWindow:function(){if(laScriptObj.readCookie(laScriptObj.LC_CEC)==null){var isVb=false;if(sessionStorage.lastActivity==laScriptObj.WebsiteGreet)
isVb=true;if(laScriptObj.readCookie("minimizeCookie")!="1"){document.getElementById("ChatDiv").style.opacity=1;WGWindowLoader.laJquery('#ChatDiv').css('display','block');}
if(typeof Mascot!="undefined")
Mascot.wgCharNone();if(typeof chatminimized!="undefined"&&chatminimized){laScriptObj.windowDisplayed=false;document.getElementById("live_chat_status").style.display="none";document.getElementById("newOnlineBtn").style.display="block"}else
laScriptObj.windowDisplayed=true,document.getElementById("live_chat_img").style.display="block",document.getElementById("live_chat_status").style.display="none",document.getElementById("newOnlineBtn").style.display="none",document.getElementById("bubble").style.display="none",document.getElementById("ChatDiv").style.display="block",document.getElementById("ChatDiv").style.opacity=1;WGChat.viewPortSetting(),null!=laScriptObj.readCookie(laScriptObj.LC_CEC)&&laScriptObj.createCookie(laScriptObj.LC_CEC,null,-24);for(var e=document.getElementById("txtChatWin");"opDiv"!==e.lastChild.id&&"vstrDiv"!==e.lastChild.id;)
e.removeChild(e.lastChild);this.opChatLinking(laScriptObj.username,greet_Message,true);var t="parUI!";t+=laScriptObj.actualUserId,t+="~parVI!",t+=laScriptObj.visitorId,t+="~parWI!",t+=laScriptObj.websiteId,t+="~parurl!",t+=laScriptObj.ReplaceSpecialCharacters(window.location.toString()),t+="~parGType!",t+=laScriptObj.greetType,t+="~parVB!",t+=isVb,t+="~"+laScriptObj.parRandmStr+"!",t+=laScriptObj.getRandomValue(),t+="~"+laScriptObj.getMethodStr+"!WGWebsite.onInsertGreetInfoResponse",laScriptObj.getJsonServiceResponse("InsGrtInfowithURLAndTypeVb","WGWebsite.onInsertGreetInfoResponse",t),"undefined"!=typeof WGWindowConstant.ga_Analytics&&WGWindowConstant.ga_Analytics&&("undefined"!=typeof WGWindowConstant.ga_Analyticsjs&&WGWindowConstant.ga_Analyticsjs?ga("send","event","LiveChat","_IsGreeted",{nonInteraction:1}):(_gaq.push(["_setAccount",WGWindowConstant.ga_AnalyticsAC]),_gaq.push(["_trackEvent","LiveChat","_IsGreeted"],!0))),"undefined"!=typeof greetMedia&&greetMedia&&playSound(greetMedia,_greetingURL)}},onInsertGreetInfoResponse:function(e){null!=e&&(laScriptObj.greetId=e,laScriptObj.isOnlyGreeted=!0,clearTimeout(laScriptObj.CloseGreet),laScriptObj.IsAlreadyGreeted||(laScriptObj.CloseGreet=setTimeout("WGWebsite.CloseOnlyGreet()",18E4)))},CloseOnlyGreet:function(){laScriptObj.createCookie("minimizeCookie",0,1);document.getElementById("live_chat_status").style.display="block",document.getElementById("newOnlineBtn").style.display="none",laScriptObj.XMPPConnectedRetry=!0;var e=document.getElementById("txtMessageWin");e.blur(),firstKey=!1,WGWindowLoader.laJquery("#ChatDiv").animate({opacity:0},1E3,function(){DomStyle.set("ChatDiv","display","none")});for(var t=document.getElementById("txtChatWin");"opDiv"!==t.lastChild.id&&"vstrDiv"!==t.lastChild.id;)
t.removeChild(t.lastChild);if(laScriptObj.createCookie(laScriptObj.LC_CEC,"laScriptObj.endStatus=1",1),laScriptObj.windowDisplayed=!1,laScriptObj.isAlreadyInChat=!1,laScriptObj.firstMessage=!0,laScriptObj.IsConnecting){var n=laScriptObj.connection;n.sync=!0,n.flush(),n.disconnect()}
laScriptObj.IsConnecting=!1;setTimeout(function(){if(typeof Mascot!="undefined")
Mascot.showMascot()},3E3)},liveChatGreet:function(myGreetType){laScriptObj.createCookie(laScriptObj.LC_CEC,null,-24);offlineBtnClicked=true;laScriptObj.greetType=myGreetType;document.getElementById("dropDownBox").style.display="none";WGWindowLoader.laJquery("#newOnlineBtn").css("display","none");WGWindowLoader.laJquery(".newIspyVehicles").css("display","none");WGWindowLoader.laJquery(".newIspyVehicles").html("");if(!laScriptObj.windowDisplayed){laScriptObj.windowDisplayed=!0,laScriptObj.WithoutGreet=!0,clearTimeout(laScriptObj.GreetingTimer),laScriptObj.room=null;var e=laScriptObj.readCookie(laScriptObj.LC_DND);(void 0!=e||"WG_DND=1"==e)&&laScriptObj.createCookie(laScriptObj.LC_DND,laScriptObj.LC_DND+"=2",8064),laScriptObj.StartChatProcess()}},UpdateChatAckResponse:function(e){if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","Inside UpdateChatAckResponse").done(function(bool){});}},onGetChatPrerequisiteAckResponse:function(e){WGWebsite.logicAcknowledgeDelay(e);},logicAcknowledgeDelay:function(e){if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.getUserIdOrConnId(laScriptObj.actualUserId).done(function(e){if(e!=""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs","logicAcknowledgeDelay-XMPPConnected:"+laScriptObj.XMPPConnected+" CONNECTING:"+laScriptObj.CONNECTING+" CONNFAIL:"+laScriptObj.CONNFAIL+" DISCONNECTING:"+laScriptObj.DISCONNECTING+" DISCONNECTED:"+laScriptObj.DISCONNECTED+" AUTHENTICATING:"+laScriptObj.AUTHENTICATING+" AUTHFAIL:"+laScriptObj.AUTHFAIL+" ERROR:"+laScriptObj.ERROR+" Singlar Connected:True").done(function(bool){}).fail(function(){})}else if(e==""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs","logicAcknowledgeDelay-XMPPConnected:"+laScriptObj.XMPPConnected+" CONNECTING:"+laScriptObj.CONNECTING+" CONNFAIL:"+laScriptObj.CONNFAIL+" DISCONNECTING:"+laScriptObj.DISCONNECTING+" DISCONNECTED:"+laScriptObj.DISCONNECTED+" AUTHENTICATING:"+laScriptObj.AUTHENTICATING+" AUTHFAIL:"+laScriptObj.AUTHFAIL+" ERROR:"+laScriptObj.ERROR+" Singlar Connected:False "+laScriptObj.actualUserId).done(function(bool){}).fail(function(){})}}).fail(function(){});var t=WGWindowLoader.laJquery.parseJSON(e);var chatStatus=t.S_ST;if(null!=e){if("1"==t.I_AIC&&t.U_N!=""&&laScriptObj.UserNameCustom.toLowerCase()!=t.U_N.toLowerCase()){laScriptObj.chatId=t.C_I;laScriptObj.room="room"+laScriptObj.chatId+WGWindowConstant.chatRoom;var msgs="[AUTOTRFCHAT]_Transferred Acknowledge Delay By "+laScriptObj.UserNameCustom+" to "+t.U_N;var dt=new Date;msgs=msgs.replace(/^\s+|\s+$/g,""),laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:!0,user_id:"-"+laScriptObj.actualUserId,manager_id:laScriptObj.actualUserId,time_stamp:WGChat.myUTCDateString(dt),website_id:laScriptObj.websiteId,visitor_name:"System",type:"groupchat"}).c("body").t(msgs));laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:!1,user_id:laScriptObj.actualUserId,manager_id:0,time_stamp:"",website_id:laScriptObj.websiteId,visitor_name:"System",type:"groupchat"}).c("gone",{xmlns:"http://jabber.org/protocol/chatstates"}));WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"Trf:UnAcknowledgeDelay","Greeter "+laScriptObj.username+" Not Acknowledged Trf To Greeter "+t.U_N).done(function(bool){}).fail(function(){})
laScriptObj.WebsiteGreet=t.AG_M;laScriptObj.username=t.U_N;laScriptObj.UserNameCustom=t.U_N;laScriptObj.userSName=t.U_N;laScriptObj.actualUserId=t.U_I;laScriptObj.autoGreetTime=t.AG_T;laScriptObj.autoGreetMessage=t.AG_M;laScriptObj.WebsiteGreet=laScriptObj.autoGreetMessage;greet_Message=t.AG_M;laScriptObj.lc_servicestatus=t.S_ST;laScriptObj.userLanguage=t.U_L;var visitorIdURL="parCI"+"!";visitorIdURL+=laScriptObj.chatId;visitorIdURL+="~"+"parUI"+"!";visitorIdURL+=laScriptObj.actualUserId;visitorIdURL+="~"+laScriptObj.parRandmStr+"!";visitorIdURL+=laScriptObj.getRandomValue();visitorIdURL+="~"+laScriptObj.getMethodStr+"!WGWebsite.UpdateChatAckResponse";laScriptObj.getJsonServiceResponse("UpdateChatAck","WGWebsite.UpdateChatAckResponse",visitorIdURL);laScriptObj.invitationAck=false;laScriptObj.inviteOperatorAwaiter(true,laScriptObj.chatId,laScriptObj.websiteId,laScriptObj.visitorId,laScriptObj.visitorName,laScriptObj.VisitorJID,t.AG_M,t.U_N,t.U_I);}else if("1"==t.I_AIC&&t.U_N!=""&&laScriptObj.UserNameCustom.toLowerCase()==t.U_N.toLowerCase()&&t.U_N_2!=""){laScriptObj.chatId=t.C_I;laScriptObj.room="room"+laScriptObj.chatId+WGWindowConstant.chatRoom;var msgs="[AUTOTRFCHAT]_Transferred Acknowledge Delay By "+laScriptObj.UserNameCustom+" to "+t.U_N_2;var dt=new Date;msgs=msgs.replace(/^\s+|\s+$/g,""),laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:!0,user_id:"-"+laScriptObj.actualUserId,manager_id:laScriptObj.actualUserId,time_stamp:WGChat.myUTCDateString(dt),website_id:laScriptObj.websiteId,visitor_name:"System",type:"groupchat"}).c("body").t(msgs));laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:!1,user_id:laScriptObj.actualUserId,manager_id:0,time_stamp:"",website_id:laScriptObj.websiteId,visitor_name:"System",type:"groupchat"}).c("gone",{xmlns:"http://jabber.org/protocol/chatstates"}));WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"Trf:UnAcknowledgeDelay","Same Greeter "+laScriptObj.username+" Available But we get New "+t.U_N_2).done(function(bool){}).fail(function(){})
laScriptObj.WebsiteGreet=t.AG_M_2;laScriptObj.username=t.U_N_2;laScriptObj.UserNameCustom=t.U_N_2;laScriptObj.userSName=t.U_N_2;laScriptObj.actualUserId=t.U_I_2;laScriptObj.actualUserIdCustom=laScriptObj.actualUserId;laScriptObj.autoGreetTime=t.AG_T_2;laScriptObj.autoGreetMessage=t.AG_M_2;laScriptObj.WebsiteGreet=laScriptObj.autoGreetMessage;greet_Message=t.AG_M_2;laScriptObj.lc_servicestatus=t.S_ST_2;laScriptObj.userLanguage=t.U_L_2;var visitorIdURL="parCI"+"!";visitorIdURL+=laScriptObj.chatId;visitorIdURL+="~"+"parUI"+"!";visitorIdURL+=laScriptObj.actualUserId;visitorIdURL+="~"+laScriptObj.parRandmStr+"!";visitorIdURL+=laScriptObj.getRandomValue();visitorIdURL+="~"+laScriptObj.getMethodStr+"!WGWebsite.UpdateChatAckResponse";laScriptObj.getJsonServiceResponse("UpdateChatAck","WGWebsite.UpdateChatAckResponse",visitorIdURL);laScriptObj.invitationAck=false;laScriptObj.inviteOperatorAwaiter(true,laScriptObj.chatId,laScriptObj.websiteId,laScriptObj.visitorId,laScriptObj.visitorName,laScriptObj.VisitorJID,t.AG_M_2,t.U_N_2,t.U_I_2);}else if("1"==t.I_AIC&&t.U_N!=""&&laScriptObj.UserNameCustom.toLowerCase()==t.U_N.toLowerCase()&&t.U_N_2==""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","Same Greeter "+laScriptObj.username+" Available So there is No Transfer ").done(function(bool){}).fail(function(){})
laScriptObj.OperatorMessageCounterReply=setTimeout(function(){WGChat.MessageAwaiter1()},laScriptObj.OneMinTimer)}}else{clearTimeout(laScriptObj.OperatorMessageCounterReply);laScriptObj.OperatorMessageCounterReply=setTimeout(function(){WGChat.MessageAwaiter1()},laScriptObj.OneMinTimer)}},logicMessageDelay:function(e,filler){if(laScriptObj.priorityLanguage=="1"&&!laScriptObj.pauseOtherTabFiller&&filler&&laScriptObj.LastMessageBy=="Visitor"){laScriptObj.room="room"+laScriptObj.chatId+WGWindowConstant.chatRoom;laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:!0,user_id:"4886",manager_id:"4886",time_stamp:WGChat.myUTCDateString(new Date),website_id:laScriptObj.websiteId,visitor_name:laScriptObj.username,type:"groupchat"}).c("body").t("Your patience is much appreciated. I'll be with you in a moment."));WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"Filler","Your patience is much appreciated. I'll be with you in a moment.").done(function(bool){});}
var t=WGWindowLoader.laJquery.parseJSON(e);var chatStatus=t.S_ST;if(null!=e&&!laScriptObj.pauseOtherTab&&chatStatus!="-1"&&parseInt(t.C_C)<=laScriptObj.MinChats){if(laScriptObj.LastMessageBy=="Visitor"&&WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected){WGWindowLoader.chat.server.getUserIdOrConnId(laScriptObj.actualUserId).done(function(connectionId){if(connectionId==""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","Greeter "+laScriptObj.username+" disconnected also greeter on less than 3 chats going to call MessageAckChatDisConnect").done(function(bool){});laScriptObj.MessageAckChatDisConnect();}}).fail(function(){});}}else if(null!=e&&!laScriptObj.pauseOtherTab&&chatStatus!="-1"&&parseInt(t.C_C)>=laScriptObj.MaxChats){if("1"==t.I_AIC){if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","Wait for Another 1 Min. 2 Min Already spent  Greeter "+laScriptObj.username+" with Chat Count:"+t.C_C+" Not Replying Message Delay").done(function(bool){}).fail(function(){});if(laScriptObj.LastMessageBy=="Visitor"&&WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected){WGWindowLoader.chat.server.getUserIdOrConnId(laScriptObj.actualUserId).done(function(connectionId){if(connectionId==""){WGWindowLoader.chat.server.updateAckAttempts(laScriptObj.websiteId,laScriptObj.visitorId,"get").done(function(ChatCount){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs",laScriptObj.username+" on 4 chats but he/she is disconnect going to Check Another Greeter Redis ChatCount:"+ChatCount).done(function(bool){})
laScriptObj.MessageAckChatDisConnect();}).fail(function(){})}else{clearTimeout(laScriptObj.OperatorMessageCounterReply3);laScriptObj.OperatorMessageCounterReply3=setTimeout(function(){WGChat.MessageAwaiter3();WGWindowLoader.chat.server.updateAckAttempts(laScriptObj.websiteId,laScriptObj.visitorId,"get").done(function(ChatCount){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","Greeter "+laScriptObj.username+" on 4 Waite Another 1 min as He/She Connected But Not Replying Chat Count:"+ChatCount).done(function(bool){})}).fail(function(){})},laScriptObj.OneMinTimer);}}).fail(function(){});}}}}else{clearTimeout(laScriptObj.OperatorMessageCounterReply);laScriptObj.OperatorMessageCounterReply=setTimeout(function(){WGChat.MessageAwaiter1()},laScriptObj.OneMinTimer)}},onGetChatPrerequisiteMessageAckResponse:function(e){WGWebsite.logicMessageDelay(e,true);},logicMessageAckDisconnect:function(e){if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.getUserIdOrConnId(laScriptObj.actualUserId).done(function(e){if(e!=""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs","logicMessageAckDisconnect-XMPPConnected:"+laScriptObj.XMPPConnected+" CONNECTING:"+laScriptObj.CONNECTING+" CONNFAIL:"+laScriptObj.CONNFAIL+" DISCONNECTING:"+laScriptObj.DISCONNECTING+" DISCONNECTED:"+laScriptObj.DISCONNECTED+" AUTHENTICATING:"+laScriptObj.AUTHENTICATING+" AUTHFAIL:"+laScriptObj.AUTHFAIL+" ERROR:"+laScriptObj.ERROR+" Singlar Connected:True").done(function(bool){}).fail(function(){})}else if(e==""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs","logicMessageAckDisconnect-XMPPConnected:"+laScriptObj.XMPPConnected+" CONNECTING:"+laScriptObj.CONNECTING+" CONNFAIL:"+laScriptObj.CONNFAIL+" DISCONNECTING:"+laScriptObj.DISCONNECTING+" DISCONNECTED:"+laScriptObj.DISCONNECTED+" AUTHENTICATING:"+laScriptObj.AUTHENTICATING+" AUTHFAIL:"+laScriptObj.AUTHFAIL+" ERROR:"+laScriptObj.ERROR+" Singlar Connected:False "+laScriptObj.actualUserId).done(function(bool){}).fail(function(){})}}).fail(function(){});var t=WGWindowLoader.laJquery.parseJSON(e);var chatStatus=t.S_ST;if(null!=e&&!laScriptObj.pauseOtherTab&&chatStatus!="-1"){if("1"==t.I_AIC&&t.U_N!=""&&laScriptObj.UserNameCustom.toLowerCase()!=t.U_N.toLowerCase()){if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.updateChatTrfTime(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,t.U_I).done(function(goingToTrf){if(goingToTrf){laScriptObj.chatId=t.C_I;laScriptObj.room="room"+laScriptObj.chatId+WGWindowConstant.chatRoom;var msgs="[AUTOTRFCHAT]_Transferred Message Delay By "+laScriptObj.UserNameCustom+" to "+t.U_N;var dt=new Date;msgs=msgs.replace(/^\s+|\s+$/g,""),laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:!0,user_id:"-"+laScriptObj.actualUserId,manager_id:laScriptObj.actualUserId,time_stamp:WGChat.myUTCDateString(dt),website_id:laScriptObj.websiteId,visitor_name:"System",type:"groupchat"}).c("body").t(msgs));laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:!1,user_id:laScriptObj.actualUserId,manager_id:0,time_stamp:"",website_id:laScriptObj.websiteId,visitor_name:"System",type:"groupchat"}).c("gone",{xmlns:"http://jabber.org/protocol/chatstates"}));WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"Trf:Disconnect","Greeter "+laScriptObj.username+" Not Available Transfer to:"+t.U_N+" "+msgs).done(function(bool){}).fail(function(){})
laScriptObj.WebsiteGreet=t.AG_M;laScriptObj.username=t.U_N;laScriptObj.UserNameCustom=t.U_N;laScriptObj.userSName=t.U_N;laScriptObj.actualUserId=t.U_I;laScriptObj.actualUserIdCustom=laScriptObj.actualUserId;laScriptObj.autoGreetTime=t.AG_T;laScriptObj.autoGreetMessage=t.AG_M;laScriptObj.WebsiteGreet=laScriptObj.autoGreetMessage;greet_Message=t.AG_M;laScriptObj.lc_servicestatus=t.S_ST;laScriptObj.userLanguage=t.U_L;var visitorIdURL="parCI"+"!";visitorIdURL+=laScriptObj.chatId;visitorIdURL+="~"+"parUI"+"!";visitorIdURL+=laScriptObj.actualUserId;visitorIdURL+="~"+laScriptObj.parRandmStr+"!";visitorIdURL+=laScriptObj.getRandomValue();visitorIdURL+="~"+laScriptObj.getMethodStr+"!WGWebsite.UpdateChatAckResponse";laScriptObj.getJsonServiceResponse("UpdateChatAck","WGWebsite.UpdateChatAckResponse",visitorIdURL);laScriptObj.invitationAck=false;laScriptObj.inviteOperatorAwaiter(true,laScriptObj.chatId,laScriptObj.websiteId,laScriptObj.visitorId,laScriptObj.visitorName,laScriptObj.VisitorJID,t.AG_M,t.U_N,t.U_I);}}).fail(function(e){});}else if("1"==t.I_AIC&&t.U_N!=""&&laScriptObj.UserNameCustom.toLowerCase()==t.U_N.toLowerCase()&&t.U_N_2!=""){if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.updateChatTrfTime(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,t.U_N_2).done(function(goingToTrf){if(goingToTrf){laScriptObj.chatId=t.C_I;laScriptObj.room="room"+laScriptObj.chatId+WGWindowConstant.chatRoom;var msgs="[AUTOTRFCHAT]_Transferred Message Delay By "+laScriptObj.UserNameCustom+" to "+t.U_N_2;var dt=new Date;msgs=msgs.replace(/^\s+|\s+$/g,""),laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:!0,user_id:"-"+laScriptObj.actualUserId,manager_id:laScriptObj.actualUserId,time_stamp:WGChat.myUTCDateString(dt),website_id:laScriptObj.websiteId,visitor_name:"System",type:"groupchat"}).c("body").t(msgs));laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:!1,user_id:laScriptObj.actualUserId,manager_id:0,time_stamp:"",website_id:laScriptObj.websiteId,visitor_name:"System",type:"groupchat"}).c("gone",{xmlns:"http://jabber.org/protocol/chatstates"}));WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"Trf:Disconnect","Greeter "+laScriptObj.username+" Not Available Transfer to:"+t.U_N_2+" "+msgs).done(function(bool){}).fail(function(){})
laScriptObj.WebsiteGreet=t.AG_M_2;laScriptObj.username=t.U_N_2;laScriptObj.UserNameCustom=t.U_N_2;laScriptObj.userSName=t.U_N_2;laScriptObj.actualUserId=t.U_I_2;laScriptObj.actualUserIdCustom=laScriptObj.actualUserId;laScriptObj.autoGreetTime=t.AG_T_2;laScriptObj.autoGreetMessage=t.AG_M_2;laScriptObj.WebsiteGreet=laScriptObj.autoGreetMessage;greet_Message=t.AG_M_2;laScriptObj.lc_servicestatus=t.S_ST_2;laScriptObj.userLanguage=t.U_L_2;var visitorIdURL="parCI"+"!";visitorIdURL+=laScriptObj.chatId;visitorIdURL+="~"+"parUI"+"!";visitorIdURL+=laScriptObj.actualUserId;visitorIdURL+="~"+laScriptObj.parRandmStr+"!";visitorIdURL+=laScriptObj.getRandomValue();visitorIdURL+="~"+laScriptObj.getMethodStr+"!WGWebsite.UpdateChatAckResponse";laScriptObj.getJsonServiceResponse("UpdateChatAck","WGWebsite.UpdateChatAckResponse",visitorIdURL);laScriptObj.invitationAck=false;laScriptObj.inviteOperatorAwaiter(true,laScriptObj.chatId,laScriptObj.websiteId,laScriptObj.visitorId,laScriptObj.visitorName,laScriptObj.VisitorJID,t.AG_M_2,t.U_N_2,t.U_I_2);}}).fail(function(e){});}else if("1"==t.I_AIC&&t.U_N!=""&&laScriptObj.UserNameCustom.toLowerCase()==t.U_N.toLowerCase()&&t.U_N_2==""){if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs"," Greeter  "+laScriptObj.username+" Available No TRF Just Mark Attempt As there is no other Operator is Available").done(function(bool){}).fail(function(){});}
clearTimeout(laScriptObj.OperatorMessageCounterReply);clearTimeout(laScriptObj.OperatorMessageCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply3);laScriptObj.OperatorMessageCounterReply=setTimeout(function(){WGChat.MessageAwaiter1()},laScriptObj.OneMinTimer)}}else{clearTimeout(laScriptObj.OperatorMessageCounterReply);laScriptObj.OperatorMessageCounterReply=setTimeout(function(){WGChat.MessageAwaiter1()},laScriptObj.OneMinTimer)}},onGetChatPrerequisiteMessageAckDisconnectResponse:function(e){WGWebsite.logicMessageAckDisconnect(e);},logicMessageAckForcebly:function(e){if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.getUserIdOrConnId(laScriptObj.actualUserId).done(function(e){if(e!=""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs","logicMessageAckForcebly-XMPPConnected:"+laScriptObj.XMPPConnected+" CONNECTING:"+laScriptObj.CONNECTING+" CONNFAIL:"+laScriptObj.CONNFAIL+" DISCONNECTING:"+laScriptObj.DISCONNECTING+" DISCONNECTED:"+laScriptObj.DISCONNECTED+" AUTHENTICATING:"+laScriptObj.AUTHENTICATING+" AUTHFAIL:"+laScriptObj.AUTHFAIL+" ERROR:"+laScriptObj.ERROR+" Singlar Connected:True").done(function(bool){}).fail(function(){})}else if(e==""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs","logicMessageAckForcebly-XMPPConnected:"+laScriptObj.XMPPConnected+" CONNECTING:"+laScriptObj.CONNECTING+" CONNFAIL:"+laScriptObj.CONNFAIL+" DISCONNECTING:"+laScriptObj.DISCONNECTING+" DISCONNECTED:"+laScriptObj.DISCONNECTED+" AUTHENTICATING:"+laScriptObj.AUTHENTICATING+" AUTHFAIL:"+laScriptObj.AUTHFAIL+" ERROR:"+laScriptObj.ERROR+" Singlar Connected:False "+laScriptObj.actualUserId).done(function(bool){}).fail(function(){})}}).fail(function(){});var t=WGWindowLoader.laJquery.parseJSON(e);var chatStatus=t.S_ST;if(null!=e&&!laScriptObj.pauseOtherTab&&chatStatus!="-1"){if("1"==t.I_AIC&&t.U_N!=""&&laScriptObj.UserNameCustom.toLowerCase()!=t.U_N.toLowerCase()&&parseInt(t.C_C)>=laScriptObj.MaxChats){if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.updateChatTrfTime(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,t.U_I).done(function(goingToTrf){WGWindowLoader.chat.server.updateAckAttempts(laScriptObj.websiteId,laScriptObj.visitorId,"get").done(function(ChatCount){if(goingToTrf&&parseInt(ChatCount)<=0){laScriptObj.chatId=t.C_I;laScriptObj.room="room"+laScriptObj.chatId+WGWindowConstant.chatRoom;var msgs="[AUTOTRFCHAT]_Transferred Message Delay By "+laScriptObj.UserNameCustom+" to "+t.U_N;var dt=new Date;msgs=msgs.replace(/^\s+|\s+$/g,""),laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:!0,user_id:"-"+laScriptObj.actualUserId,manager_id:laScriptObj.actualUserId,time_stamp:WGChat.myUTCDateString(dt),website_id:laScriptObj.websiteId,visitor_name:"System",type:"groupchat"}).c("body").t(msgs));laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:!1,user_id:laScriptObj.actualUserId,manager_id:0,time_stamp:"",website_id:laScriptObj.websiteId,visitor_name:"System",type:"groupchat"}).c("gone",{xmlns:"http://jabber.org/protocol/chatstates"}));WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"Trf:Forcefully","Forcefully Transfer Greeter "+laScriptObj.username+" Not Replying As he is on Chat:"+t.C_C).done(function(bool){}).fail(function(){})
laScriptObj.WebsiteGreet=t.AG_M;laScriptObj.username=t.U_N;laScriptObj.UserNameCustom=t.U_N;laScriptObj.userSName=t.U_N;laScriptObj.actualUserId=t.U_I;laScriptObj.autoGreetTime=t.AG_T;laScriptObj.autoGreetMessage=t.AG_M;laScriptObj.WebsiteGreet=laScriptObj.autoGreetMessage;greet_Message=t.AG_M;laScriptObj.lc_servicestatus=t.S_ST;laScriptObj.userLanguage=t.U_L;var visitorIdURL="parCI"+"!";visitorIdURL+=laScriptObj.chatId;visitorIdURL+="~"+"parUI"+"!";visitorIdURL+=laScriptObj.actualUserId;visitorIdURL+="~"+laScriptObj.parRandmStr+"!";visitorIdURL+=laScriptObj.getRandomValue();visitorIdURL+="~"+laScriptObj.getMethodStr+"!WGWebsite.UpdateChatAckResponse";laScriptObj.getJsonServiceResponse("UpdateChatAck","WGWebsite.UpdateChatAckResponse",visitorIdURL);laScriptObj.invitationAck=false;laScriptObj.inviteOperatorAwaiter(true,laScriptObj.chatId,laScriptObj.websiteId,laScriptObj.visitorId,laScriptObj.visitorName,laScriptObj.VisitorJID,t.AG_M,t.U_N,t.U_I);clearTimeout(laScriptObj.OperatorMessageCounterReply);clearTimeout(laScriptObj.OperatorMessageCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply3);WGWindowLoader.chat.server.updateAckAttempts(laScriptObj.websiteId,laScriptObj.visitorId,"set").done(function(ChatCount){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","Chat Count Set to 1 Greeter Chat "+t.C_C+" Inside Force Trf I Counter Set Redis Count:"+ChatCount).done(function(bool){});}).fail(function(){});}else
WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","This Visitor Chat Already Transfered one time "+ChatCount).done(function(bool){});}).fail(function(){})}).fail(function(e){});}else if("1"==t.I_AIC&&t.U_N!=""&&laScriptObj.UserNameCustom.toLowerCase()==t.U_N.toLowerCase()&&t.U_N_2!=""&&parseInt(t.C_C)>=laScriptObj.MaxChats){if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.updateChatTrfTime(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,t.U_N_2).done(function(goingToTrf){WGWindowLoader.chat.server.updateAckAttempts(laScriptObj.websiteId,laScriptObj.visitorId,"get").done(function(ChatCount){if(goingToTrf&&parseInt(ChatCount)<=0){laScriptObj.chatId=t.C_I;laScriptObj.room="room"+laScriptObj.chatId+WGWindowConstant.chatRoom;var msgs="[AUTOTRFCHAT]_Transferred Message Delay By "+laScriptObj.UserNameCustom+" to "+t.U_N_2;var dt=new Date;msgs=msgs.replace(/^\s+|\s+$/g,""),laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:!0,user_id:"-"+laScriptObj.actualUserId,manager_id:laScriptObj.actualUserId,time_stamp:WGChat.myUTCDateString(dt),website_id:laScriptObj.websiteId,visitor_name:"System",type:"groupchat"}).c("body").t(msgs));laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:!1,user_id:laScriptObj.actualUserId,manager_id:0,time_stamp:"",website_id:laScriptObj.websiteId,visitor_name:"System",type:"groupchat"}).c("gone",{xmlns:"http://jabber.org/protocol/chatstates"}));WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"Trf:Forcefully","Same Greeter "+laScriptObj.username+" With Chat Count "+t.C_C+" Available but we trf this to "+t.U_N_2+" "+msgs).done(function(bool){}).fail(function(){})
laScriptObj.WebsiteGreet=t.AG_M_2;laScriptObj.username=t.U_N_2;laScriptObj.UserNameCustom=t.U_N_2;laScriptObj.userSName=t.U_N_2;laScriptObj.actualUserId=t.U_I_2;laScriptObj.autoGreetTime=t.AG_T_2;laScriptObj.autoGreetMessage=t.AG_M_2;laScriptObj.WebsiteGreet=laScriptObj.autoGreetMessage;greet_Message=t.AG_M_2;laScriptObj.lc_servicestatus=t.S_ST_2;laScriptObj.userLanguage=t.U_L_2;var visitorIdURL="parCI"+"!";visitorIdURL+=laScriptObj.chatId;visitorIdURL+="~"+"parUI"+"!";visitorIdURL+=laScriptObj.actualUserId;visitorIdURL+="~"+laScriptObj.parRandmStr+"!";visitorIdURL+=laScriptObj.getRandomValue();visitorIdURL+="~"+laScriptObj.getMethodStr+"!WGWebsite.UpdateChatAckResponse";laScriptObj.getJsonServiceResponse("UpdateChatAck","WGWebsite.UpdateChatAckResponse",visitorIdURL);laScriptObj.invitationAck=false;laScriptObj.inviteOperatorAwaiter(true,laScriptObj.chatId,laScriptObj.websiteId,laScriptObj.visitorId,laScriptObj.visitorName,laScriptObj.VisitorJID,t.AG_M_2,t.U_N_2,t.U_I_2);clearTimeout(laScriptObj.OperatorMessageCounterReply);clearTimeout(laScriptObj.OperatorMessageCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply3);WGWindowLoader.chat.server.updateAckAttempts(laScriptObj.websiteId,laScriptObj.visitorId,"set").done(function(ChatCount){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","Greeter on Chat Count "+t.C_C+" Going to Mark this chat Transfered in Redis"+ChatCount).done(function(bool){});}).fail(function(){});}else
WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","This Visitor Chat Already Marked Transfered Redis Chat Count:"+ChatCount).done(function(bool){});}).fail(function(){})}).fail(function(e){});}else{WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","Forcebly Chat Transfered Called But Cond Not Matched Greeter Chat "+t.C_C+" Inside Force").done(function(bool){});}}},onGetChatPrerequisiteMessageAckForceblyResponse:function(e){WGWebsite.logicMessageAckForcebly(e);},onGetChatPrerequisiteResponse:function(e){if(laScriptObj.readCookie("minimizeCookie")=="1"||laScriptObj.readCookie("minimizeCookie")==1){if(typeof chatminimized!="undefined")
chatminimized=true;document.getElementById("live_chat_status").style.display="none";document.getElementById("newOnlineBtn").style.display="block"}
var t=WGWindowLoader.laJquery.parseJSON(e);var chatStatus=t.S_ST;if(t.S_ST=="-1"&&offlineBtnClicked){WGWindowLoader.laJquery('.our-chat-button').attr('onclick',"javascript:WGWebsite.WG_OnOfflineClick()");WGWindowLoader.laJquery('#offline-form-container,#offline-form-container #form-title-text,#offline-form-container #form-fields-container').css('display','block');WGWindowLoader.laJquery('#ChatDiv,#offlineThankMsg').css('display','none');WGWindowLoader.laJquery('#ChatDiv').css('opacity','0');WGWindowLoader.laJquery('#ChatDiv').css('display','none');WGWindowLoader.laJquery('#offline-form-content input, #offline-form-content textarea').css('border','none');}else if(t.S_ST=="-1"){WGWindowLoader.laJquery('.our-chat-button').attr('onclick',"javascript:WGWebsite.WG_OnOfflineClick()");}else{if(WGWindowLoader.readCookie("minimizeCookie")=="1"){WGWindowLoader.laJquery('.our-chat-button').attr('onclick',"javascript:OnOff()");}else{WGWindowLoader.laJquery('.our-chat-button').attr('onclick',"javascript:WGWebsite.liveChatGreet('Passive')");}}"undefined"!=typeof WGWindowConstant.MLang&&WGWindowConstant.MLang&&WGMLanguage.getLanguages();var n=document.getElementById("conversationDIV");if(null!=e){var o=null,i=null;if("-1"==t.I_AIC)
if(laScriptObj.username=t.U_N,laScriptObj.UserNameCustom=t.U_N,laScriptObj.EMP=t.EMP,laScriptObj.userSName=t.U_N,null!=document.getElementById("cwin_username")&&("undefined"!=typeof WGWindowConstant.SName&&WGWindowConstant.SName?(document.getElementById("cwin_username").innerHTML=WGWindowConstant.mySName[laScriptObj.randomnumber],"undefined"!=typeof WGWindowConstant.SPic&&WGWindowConstant.SPic&&(document.getElementById("opImage").src=WGWindowConstant.opPath+WGWindowConstant.mySName[laScriptObj.randomnumber]+".png")):(document.getElementById("cwin_username").innerHTML=laScriptObj.username,"undefined"!=typeof WGWindowConstant.SPic&&WGWindowConstant.SPic&&(document.getElementById("opImage").src=WGWindowConstant.opPath+
laScriptObj.username+".png"))),""!=laScriptObj.username&&null!=laScriptObj.username){if(!laScriptObj.WithoutGreet)
if("undefined"!=typeof LC_textStatus&&LC_textStatus)
document.getElementById("live_chat_status").setAttribute("href","javascript:WGWebsite.liveChatGreet('Passive')"),hideOnLoad();else if(null==document.getElementById("live_chat_img")){"undefined"==typeof lc_img_anchor?(i=document.createElement("a"),i.setAttribute("href","javascript:WGWebsite.liveChatGreet('Passive')"),i.style.border="none"):o=document.getElementById("live_chat_anchor");var a=document.getElementById(WGWindowConstant.liveChatStatus),d=document.createElement("img");d.style.border="none",d.setAttribute("id","live_chat_img"),d.setAttribute("alt","Chat"),d.setAttribute("title","live support"),d.setAttribute("src",WGWindowConstant._imageURL+LC_onlineImg),d.style.display="block","undefined"==typeof lc_img_anchor?(i.appendChild(d),(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/Android/i)&&navigator.userAgent.search("Mobile")>-1)&&(d.style.height="100%",d.style.width="100%"),a.appendChild(i)):o.appendChild(d)}
if(typeof WGWindowConstant.claimChatEnabled!="undefined"&&WGWindowConstant.claimChatEnabled){laScriptObj.actualUserId=t.U_I.split("*")[0];actualUserIds=t.U_I;laScriptObj.actualUserIdCustom=laScriptObj.actualUserId;}else{laScriptObj.actualUserId=t.U_I;laScriptObj.actualUserIdCustom=laScriptObj.actualUserId;}
laScriptObj.autoGreetTime=t.AG_T;var lastAct=sessionStorage.getItem("lastActivity");if(lastAct==null||lastAct==""){if(typeof Mascot!="undefined")
Mascot.wgCharNone();laScriptObj.autoGreetMessage=t.AG_M;laScriptObj.WebsiteGreet=laScriptObj.autoGreetMessage;greet_Message=t.AG_M}else{laScriptObj.autoGreetMessage=sessionStorage.getItem("lastActivity");greet_Message=sessionStorage.getItem("lastActivity");laScriptObj.WebsiteGreet=sessionStorage.getItem("lastActivity")}
laScriptObj.lc_servicestatus=t.S_ST;1==laScriptObj.lc_servicestatus&&1==WGWindowConstant.LC_onMobilePassive&&(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/Android/i)&&-1<navigator.userAgent.search("Mobile")||-1<navigator.userAgent.search("Mobile")&&-1<navigator.userAgent.search("BlackBerry"))?window.setTimeout(bubbleAppear,1E3):(-1==laScriptObj.lc_servicestatus&&1==WGWindowConstant.LC_onMobilePassive&&(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/Android/i)&&-1<navigator.userAgent.search("Mobile")||-1<navigator.userAgent.search("Mobile")&&navigator.userAgent.search("BlackBerry")),document.getElementById("bubble").style.display="none");(navigator.userAgent.search("Mobile")>-1||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i))&&"undefined"!=typeof WGWindowConstant.LC_onMobilePassive&&WGWindowConstant.LC_onMobilePassive&&("undefined"!=typeof LC_onMobilePassiveHideButton&&LC_onMobilePassiveHideButton?(document.getElementById("live_chat_status").style.display="none",laScriptObj.lc_servicestatus=2):laScriptObj.lc_servicestatus=2),laScriptObj.priorityLanguage=t.W_L,laScriptObj.userLanguage=t.U_L,laScriptObj.currentLanguageId=laScriptObj.userLanguage;var r=new Date;if(!laScriptObj.isAlreadyInChat)
if(laScriptObj.WithoutGreet)
setTimeout("WGWebsite.showWindow()",1E3),document.getElementById("live_chat_img").style.display="block";else{var r=new Date,s=0;if(!dBrowser.isMobile()&&!dBrowser.isAndroid()&&!dBrowser.isAndroidTablet()&&!dBrowser.isIpad()&&!dBrowser.isIphone()){if(laScriptObj.lc_servicestatus=="2"&&laScriptObj.readCookie("minimizeCookie")=="1"){setTimeout("WGWebsite.showWindow()",1E3);}}
if(dBrowser.isMobile()||dBrowser.isAndroid()||dBrowser.isAndroidTablet()||dBrowser.isIpad()||dBrowser.isIphone()){if(WGWindowConstant.LC_onMobilePassive&&laScriptObj.readCookie("minimizeCookie")=="1"){setTimeout("WGWebsite.showWindow()",1E3);}}"undefined"!=typeof WGWindowConstant.firstPageActive&&0!=WGWindowConstant.firstPageActive||"undefined"!=typeof WGWindowConstant.firstPagePassive&&0!=WGWindowConstant.firstPagePassive?"undefined"!=typeof WGWindowConstant.firstPageActive&&WGWindowConstant.activePages.indexOf(window.location.host+window.location.pathname)>-1?document.getElementById("live_chat_img").style.display="block":"undefined"!=typeof WGWindowConstant.firstPagePassive&&WGWindowConstant.passivePages.indexOf(window.location.host+
window.location.pathname)>-1?"1"==laScriptObj.lc_servicestatus?(document.getElementById("live_chat_img").style.display="block",null!=laScriptObj.readCookie(laScriptObj.LC_TIME)?(s=(parseInt(r.getTime().toString())-parseInt(laScriptObj.readCookie(laScriptObj.LC_TIME)))/1E3,laScriptObj.autoGreetTime<s?setTimeout("WGWebsite.showWindow()",1E3):laScriptObj.GreetingTimer=setTimeout("WGWebsite.showWindow()",1E3*(laScriptObj.autoGreetTime-s))):(laScriptObj.createCookie(laScriptObj.LC_TIME,r.getTime().toString(),1),laScriptObj.GreetingTimer=setTimeout("WGWebsite.showWindow()",1E3*laScriptObj.autoGreetTime))):document.getElementById("live_chat_img").style.display="block":"undefined"!=typeof WGWindowConstant.firstPagePassive&&WGWindowConstant.passivePages.indexOf(window.location.host+window.location.pathname)<=-1?document.getElementById("live_chat_img").style.display="block":"1"==laScriptObj.lc_servicestatus?(document.getElementById("live_chat_img").style.display="block",null!=laScriptObj.readCookie(laScriptObj.LC_TIME)?(s=(parseInt(r.getTime().toString())-parseInt(laScriptObj.readCookie(laScriptObj.LC_TIME)))/1E3,laScriptObj.autoGreetTime<s?setTimeout("WGWebsite.showWindow()",1E3):laScriptObj.GreetingTimer=setTimeout("WGWebsite.showWindow()",1E3*(laScriptObj.autoGreetTime-s))):(laScriptObj.createCookie(laScriptObj.LC_TIME,r.getTime().toString(),1),laScriptObj.GreetingTimer=setTimeout("WGWebsite.showWindow()",1E3*laScriptObj.autoGreetTime))):document.getElementById("live_chat_img").style.display="block":"1"==laScriptObj.lc_servicestatus?(document.getElementById("live_chat_img").style.display="block",null!=laScriptObj.readCookie(laScriptObj.LC_TIME)?(s=(parseInt(r.getTime().toString())-parseInt(laScriptObj.readCookie(laScriptObj.LC_TIME)))/1E3,laScriptObj.autoGreetTime<s?setTimeout("WGWebsite.showWindow()",1E3):laScriptObj.GreetingTimer=setTimeout("WGWebsite.showWindow()",1E3*(laScriptObj.autoGreetTime-s))):(laScriptObj.createCookie(laScriptObj.LC_TIME,r.getTime().toString(),1),laScriptObj.GreetingTimer=setTimeout("WGWebsite.showWindow()",1E3*laScriptObj.autoGreetTime))):document.getElementById("live_chat_img").style.display="block"}}else if("undefined"!=typeof LC_textStatus&&LC_textStatus)
document.getElementById("live_chat_status").setAttribute("href","javascript:WG_OnOfflineClick()");else if(null==document.getElementById("live_chat_img")){if("undefined"==typeof lc_img_anchor){var i=document.createElement("a");i.setAttribute("href","javascript:WGWebsite.WG_OnOfflineClick()"),i.style.border="none"}else
o=document.getElementById("live_chat_anchor");var a=document.getElementById(WGWindowConstant.liveChatStatus),d=document.createElement("img");d.style.border="none",d.setAttribute("id","live_chat_img"),d.setAttribute("alt","Chat"),d.setAttribute("title","live support"),d.setAttribute("src",WGWindowConstant._imageURL+LC_offlineImg),"undefined"==typeof lc_img_anchor?(i.appendChild(d),a.appendChild(i)):o.appendChild(d)}else{var d=document.getElementById("live_chat_img");d.style.border="none",d.setAttribute("src",WGWindowConstant._imageURL+LC_offlineImg)}
else if("1"==t.I_AIC){laScriptObj.invitationAck=true;laScriptObj.FirstMessageByVisitor=="";laScriptObj.isAlreadyInChat=!0;document.getElementById("live_chat_status").style.display="none";hideOnLoad(),laScriptObj.WebsiteGreet=t.AG_M;laScriptObj.EMP=t.EMP;laScriptObj.userSName=t.U_N;laScriptObj.UserNameCustom=t.U_N;laScriptObj.chatId=t.C_I,laScriptObj.actualUserId=t.U_I;laScriptObj.actualUserIdCustom=laScriptObj.actualUserId;var l=laScriptObj.readCookieJson("OP_N").OP_N;if(laScriptObj.username=null!=l&&void 0!==l?l:t.U_N,laScriptObj.firstKey=!0,laScriptObj.connectRoom(WGWindowConstant.XMPP_SERVER,"123"),""!=laScriptObj.username){if(null!=document.getElementById("cwin_username")&&("undefined"!=typeof WGWindowConstant.SName&&WGWindowConstant.SName?(document.getElementById("cwin_username").innerHTML=WGWindowConstant.mySName[laScriptObj.randomnumber],"undefined"!=typeof WGWindowConstant.SPic&&WGWindowConstant.SPic&&(document.getElementById("opImage").src=WGWindowConstant.opPath+
mySName[laScriptObj.randomnumber]+".png")):(document.getElementById("cwin_username").innerHTML=laScriptObj.username,"undefined"!=typeof WGWindowConstant.SPic&&WGWindowConstant.SPic&&(document.getElementById("opImage").src=WGWindowConstant.opPath+laScriptObj.username+".png"))),"undefined"!=typeof LC_textStatus&&LC_textStatus)
document.getElementById("live_chat_status").setAttribute("href","javascript:WGWebsite.liveChatGreet('Passive')");else if(null==laScriptObj.live_chat_Image){var i=document.createElement("a");i.setAttribute("href","javascript:WGWebsite.liveChatGreet('Passive')"),i.style.border="none";var a=document.getElementById(WGWindowConstant.liveChatStatus),d=document.createElement("img");d.style.border="none",d.setAttribute("id","live_chat_img"),d.setAttribute("alt","Chat"),d.setAttribute("title","live support"),d.setAttribute("src",WGWindowConstant._imageURL+LC_onlineImg),d.style.display="block",i.appendChild(d),a.appendChild(i)}else{var d=document.getElementById("live_chat_img");d.style.border="none",d.setAttribute("src",WGWindowConstant._imageURL+LC_onlineImg),d.style.display="block"}
laScriptObj.lc_servicestatus=t.S_ST,(navigator.userAgent.search("Mobile")>-1||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i))&&"undefined"!=typeof WGWindowConstant.LC_onMobilePassive&&WGWindowConstant.LC_onMobilePassive&&("undefined"!=typeof LC_onMobilePassiveHideButton&&LC_onMobilePassiveHideButton?(document.getElementById("live_chat_status").style.display="none",laScriptObj.lc_servicestatus=2):laScriptObj.lc_servicestatus=2),laScriptObj.userLanguage=t.U_L,laScriptObj.currentLanguageId=laScriptObj.userLanguage,laScriptObj.firstMessage=!1}}
null!=n&&(n.style.display="block")}}},WGChat={showTypingDiv:"",hideTypingDiv:"",showTypingstatusDiv:function(){null!=document.getElementById("typingstatus")&&"undefined"!=document.getElementById("typingstatus")&&(this.statusDIV=document.getElementById("typingstatus"),this.statusDIV.style.visibility="visible")},hideTypingstatusDiv:function(){null!=document.getElementById("typingstatus")&&"undefined"!=document.getElementById("typingstatus")&&(this.statusDIV=document.getElementById("typingstatus"),this.statusDIV.style.visibility="hidden")},InsertChat:function(){var isVb="false";if(sessionStorage.lastActivity==laScriptObj.WebsiteGreet){isVb="true";laScriptObj.autoGreetMessage=sessionStorage.lastActivity;}
var e="parUI^";e+=laScriptObj.actualUserId,e+="~parAUI^",e+=laScriptObj.actualUserId,e+="~parWI^",e+=laScriptObj.websiteId,e+="~parVI^",e+=laScriptObj.visitorId,e+="~parVB^",e+=isVb,e+="~parRStatus^",e+=!1,e+="~parVN^",e+=laScriptObj.visitorName,e+="~parGI^",e+=laScriptObj.greetId,e+="~parGM^";var t=laScriptObj.ReplaceSpecialCharacters(laScriptObj.autoGreetMessage);e+=t,e+="~parCM^",e+=laScriptObj.IsConnecting+" AND "+laScriptObj.XMPPConnected+" CONNECTING:"+laScriptObj.CONNECTING+" CONNFAIL:"+laScriptObj.CONNFAIL+" DISCONNECTING:"+laScriptObj.DISCONNECTING+" DISCONNECTED:"+laScriptObj.DISCONNECTED+" AUTHENTICATING:"+laScriptObj.AUTHENTICATING+" AUTHFAIL:"+laScriptObj.AUTHFAIL+" ERROR:"+laScriptObj.ERROR,e+="~parOpN^",e+=laScriptObj.username,e+="~parUrl^",e+=laScriptObj.ReplaceSpecialCharacters(window.location.toString()),e+="~parDM^",e+=laScriptObj.host,e+="~parLan^",e+=laScriptObj.priorityLanguage,e+="~"+laScriptObj.parRandmStr+"^",e+=laScriptObj.getRandomValue(),e+="~"+laScriptObj.getMethodStr+"^WGChat.onInsertChatInfoResponse",getJsonServiceResponseUpdated("InsertCInfoMVbNew","WGChat.onInsertChatInfoResponse",e),"undefined"!=typeof WGWindowConstant.ga_Analytics&&WGWindowConstant.ga_Analytics&&("undefined"!=typeof WGWindowConstant.ga_Analyticsjs&&WGWindowConstant.ga_Analyticsjs?(ga("create",WGWindowConstant.ga_AnalyticsAC),ga("send","event","LiveChat","_isStarted",{nonInteraction:1})):(_gaq.push(["_setAccount",WGWindowConstant.ga_AnalyticsAC]),_gaq.push(["_trackEvent","LiveChat","_isStarted"],!0))),"undefined"!=typeof WGWindowConstant._trackAdWords&&WGWindowConstant._trackAdWords&&CreateIframeAdWords("",WGWindowConstant._trackAdWordsURL)},onInsertChatInfoResponse:function(e){pauseOtherTabFiller=false;pauseOtherTab=false
laScriptObj.isAlreadyInChat=true;laScriptObj.invitationAck=false;laScriptObj.chatId=e[0];if(e[1]!=""&&laScriptObj.actualUserId!=e[1]){if(typeof WGWindowConstant.claimChatEnabled!="undefined"&&WGWindowConstant.claimChatEnabled){laScriptObj.actualUserId=laScriptObj.actualUserId;laScriptObj.actualUserIdCustom=laScriptObj.actualUserId;}else{laScriptObj.actualUserId=e[1];laScriptObj.actualUserIdCustom=laScriptObj.actualUserId;}}
laScriptObj.UserNameCustom=e[2];if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","Chat Started").done(function(bool){});WGWindowLoader.chat.server.updateAckAttempts(laScriptObj.websiteId,laScriptObj.visitorId,"reset").done(function(ChatCount){}).fail(function(){});}
laScriptObj.checkConnection();"undefined"!=typeof WGWindowConstant.chatRating&&WGWindowConstant.chatRating&&(WGWindowLoader.laJquery("#upBTN").click(function(){WGVisitor.chatRating("5","Up Ratting")}),WGWindowLoader.laJquery("#downBTN").click(function(){WGVisitor.chatRating("1","Down Ratting")}));var chatLocation=location.href;var date=new Date;var chatStartTime={};chatStartTime["startTime"]=date;chatStartTime["endTime"]="";chatStartTime["visitorid"]=laScriptObj.visitorId;chatStartTime["postType"]="Chat";La.signalRCall(JSON.stringify(chatStartTime));var resultCookie=La.readCookieJson("WG_VIC_J");var resultwi=La.readCookieJson("WG_WEB");var isVb=false;if(sessionStorage.lastActivity==laScriptObj.WebsiteGreet){isVb=true;if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.sendGreeting(resultCookie.V_I,resultwi.W_I,laScriptObj.chatId,laScriptObj.WebsiteGreet,isVb)}
if(typeof WGWindowConstant.UTMParm!="undefined"&&WGWindowConstant.UTMParm){var formatDate=function(date){var monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];var day=date.getDate();var monthIndex=date.getMonth();var year=date.getFullYear();return day+" "+monthNames[monthIndex]+" "+year};var utmXml="<CustomFields><UTM_Term>"+ga_utm_term+"</UTM_Term><UTM_Source>"+ga_utm_source+"</UTM_Source><UTM_Medium>"+ga_utm_medium+"</UTM_Medium><UTM_Content>"+ga_utm_content+"</UTM_Content><UTM_Campaign>"+ga_utm_campaign+"</UTM_Campaign><GA_Session_Count>"+
ga_session_count+"</GA_Session_Count><GA_Pageview_Count>"+ga_pageview_count+"</GA_Pageview_Count><GA_GCLID>"+ga_gclid+"</GA_GCLID><GA_ClientId>"+ga_client_id+"</GA_ClientId></CustomFields>";var utmVar={"parCId":laScriptObj.chatId,"parWId":laScriptObj.websiteId,"parCFD":utmXml,"parChatStartTime":formatDate(new Date),"parVI":laScriptObj.visitorId,"parR":laScriptObj.getRandomValue(),"method":"WGChat.InsertChatInfoExtDataResponse"};getJsonServiceResponseNew("InsertChatInfoExtData","WGChat.InsertChatInfoExtDataResponse",utmVar)}},MessageAwaiter1:function(){if(laScriptObj.LastMessageBy=="Visitor")
if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.getUserIdOrConnId(laScriptObj.actualUserId).done(function(e){if(e!=""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","1 Min UP Inside MessageAwaiter1 Greeter "+laScriptObj.username+" is Available In Redis But Not Replying").done(function(bool){}).fail(function(){});}else{if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.updateAckAttempts(laScriptObj.websiteId,laScriptObj.visitorId,"get").done(function(ChatCount){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","1 Min UP Inside MessageAwaiter1 Greeter "+laScriptObj.username+" Not Avaiable going to Check Another Operator Calling MessageAckChatDisConnect").done(function(bool){}).fail(function(){});laScriptObj.MessageAckChatDisConnect();}).fail(function(){})}}).fail(function(){});clearTimeout(laScriptObj.OperatorMessageCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply3);laScriptObj.OperatorMessageCounterReply2=setTimeout(function(){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","1 Min UP Inside WGChat.MessageAwaiter1() going to call WGChat.MessageAwaiter2()").done(function(bool){})
WGChat.MessageAwaiter2()},laScriptObj.OneMinTimer)},MessageAwaiter2:function(){if(laScriptObj.LastMessageBy=="Visitor"&&laScriptObj.isAlreadyInChat&&WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected){WGWindowLoader.chat.server.updateAckAttempts(laScriptObj.websiteId,laScriptObj.visitorId,"get").done(function(ChatCount){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","1 Min UP In MessageAwaiter2 Redis ChatCount:"+ChatCount+" Going to get another Operator").done(function(bool){})
laScriptObj.MessageAckChat();}).fail(function(){})}},MessageAwaiter3:function(){if(laScriptObj.LastMessageBy=="Visitor"&&WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","MessageAwaiter3 Going To Check Availability MessageAckChatForcebly()").done(function(bool){})
laScriptObj.MessageAckChatForcebly();}},InsertChatInfoExtDataResponse:function(e){},vstrChatLinking:function(e,t,bool){if(laScriptObj.FirstMessageByVisitor==""&&bool&&laScriptObj.EMP!=""&&laScriptObj.EMP=="01"){laScriptObj.LastMessageBy="Visitor";clearTimeout(laScriptObj.OperatorMessageCounterReply);clearTimeout(laScriptObj.OperatorMessageCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply3);laScriptObj.OperatorMessageCounterReply=setTimeout(function(){WGChat.MessageAwaiter1();},laScriptObj.OneMinTimer);laScriptObj.FirstMessageByVisitor="Yes";laScriptObj.pauseOtherTabFiller=false;}
var myAudioOff='<audio id="audioOff" autoplay="false"><source src="'+window.location.protocol+'//cdn.thelivechatsoftware.com/Uploads/silence.wav" type="audio/mpeg"></source></audio>';var myChatDiv=document.getElementById("ChatDiv");var myAudioPlayOff=document.createElement("div");myAudioPlayOff.id="myAudioPlayOff";myAudioPlayOff.innerHTML=myAudioOff;myChatDiv.appendChild(myAudioPlayOff);t=t.replace(/^\s+|\s+$/g,"");var n;n=document.getElementById("vstrDiv").cloneNode(!0),laScriptObj.vstrCount++,n.id=laScriptObj.vstrCount,vstrnameNew=document.getElementById("vstrname").cloneNode(!0),vstrnameNew.id="New"+document.getElementById("vstrname").id,vstrnameNew.style.verticalAlign="top",vstrconvNew=document.getElementById("vstrconv").cloneNode(!0),vstrconvNew.id="New"+document.getElementById("vstrconv").id,vstrconvNew.style.verticalAlign="top",vstrnameNew.innerHTML="",vstrconvNew.innerHTML="";var resultCookie=laScriptObj.readCookieJson(laScriptObj.LC_VIC);if(resultCookie!=null&&(resultCookie.V_N!=undefined&&resultCookie.V_N!=laScriptObj.visitorName))
laScriptObj.visitorName=resultCookie.V_N;if(typeof WGWindowConstant.showOnlyVsName!="undefined"&&WGWindowConstant.showOnlyVsName)
vstrnameNew.innerHTML=laScriptObj.visitorName.replace(laScriptObj.visitorId,"")+": ";else
vstrnameNew.innerHTML=laScriptObj.visitorName+": ";vstrconvNew.innerHTML=t;n.appendChild(vstrnameNew);var o=vstrconvNew.innerHTML.toString(),i=o.indexOf("http"),a="";if(i>=0){var d=o.split(" ");for(c=0;c<d.length;c++)
if(""==WGWebsite.checkIsURL(d[c].toString()))
a+=" "+d[c].toString()+" ";else{var r='<a id="linkChatvstr" target="_blank" position="absolute" href=" '+d[c].toString()+' " style="text-decoration:umderline;color:blue;"   >'+d[c].toString()+"</a>";a+=" "+r}
vstrconvNew.innerHTML=a,n.appendChild(vstrconvNew)}else{if(null!=document.getElementById("emoticonDiv"))
for(var s=o,l=o.length,W=0;l>W;W++)
for(var c=0;6>c;c++){var m=s.indexOf(signs[c]);if(-1!==m){s=s.replace(signs[c],"K");var u="<img id='smilies' src=\""+imgs[c]+'" style="margin-top: -4px;vertical-align:top;" title=" '+txts[c]+' " >';if(navigator.userAgent.match(/iPad/i))
var u="<img id='smilies' src=\""+imgs[c]+'" style="margin-top: 0px;vertical-align:top;" title=" '+txts[c]+' " >';o=o.replace(signs[c]," "+u+" ");break}}
vstrconvNew.innerHTML=o,n.appendChild(vstrconvNew)}
laScriptObj.ChatWin.appendChild(n),laScriptObj.ChatWin.scrollTop=laScriptObj.ChatWin.scrollHeight,laScriptObj.MsgWin.value="",laScriptObj.MsgWin.scrollTop=laScriptObj.MsgWin.scrollHeight},closeXmppChat:function(e){WGWindowLoader.laJquery("#newOnlineBtn").css("display","none");WGWindowLoader.laJquery("#live_chat_status").css("display","block");WGWindowLoader.laJquery(".newIspyVehicles").css("display","none");WGWindowLoader.laJquery(".newIspyVehicles").html("");laScriptObj.createCookie("minimizeMessages",0,1);laScriptObj.XMPPConnectedRetry=!0,laScriptObj.firstKey=!1;var t=document.getElementById("ChatDiv");"block"==t.style.display&&(t.style.display="none");var n=laScriptObj.connection;n.sync=!0;var o=$pres({to:laScriptObj.room,type:"unavailable"});n.send(o.tree()),n.flush(),n.disconnect(),laScriptObj.room=null,"[Ignore]"==e?(DomStyle.set("live_chat_img","display","none"),laScriptObj.createCookie(laScriptObj.LC_IGN,laScriptObj.LC_IGN+"=1",16128),WGChat.CloseChatWindow(!0)):"[DND]"==e?(laScriptObj.createCookie(laScriptObj.LC_DND,laScriptObj.LC_DND+"=1",8064),WGChat.CloseChatWindow(!0)):WGChat.CloseChatWindow(!1)},onEndChatResponse:function(e){null!=e&&(e||""==e)&&(laScriptObj.createCookie(laScriptObj.LC_CEC,"laScriptObj.endStatus=1",1),laScriptObj.isAlreadyInChat=!1,laScriptObj.MsgWin.value="")},CloseChatWindow:function(e){WGWindowLoader.createCookie("opName",null,-24);WGWindowLoader.laJquery('.our-chat-button').attr('onclick',"javascript:WGWebsite.liveChatGreet('Passive')");if(laScriptObj.EMP!=""&&laScriptObj.EMP=="01"&&WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.markAttemptDumpsChatLog().done(function(e){}).fail(function(){});laScriptObj.FirstMessageByVisitor="";laScriptObj.invitationAck=false;laScriptObj.LastMessageBy="";clearTimeout(laScriptObj.OperatorMessageCounterReply);clearTimeout(laScriptObj.OperatorMessageCounterReply2);clearTimeout(laScriptObj.OperatorMessageCounterReply3);laScriptObj.OperatorMessageCounterReply=null;laScriptObj.OperatorMessageCounterReply2=null;laScriptObj.OperatorMessageCounter=0;clearTimeout(laScriptObj.OperatorAckCounterReply);clearTimeout(laScriptObj.OperatorAckCounterReply2);laScriptObj.OperatorAckCounterReply=null;laScriptObj.OperatorAckCounterReply2=null;laScriptObj.createCookie("minimizeCookie",0,1);document.getElementById("live_chat_status").style.display="block";laScriptObj.XMPPConnected=!1,laScriptObj.firstKey=!1;var t=document.getElementById("ChatDiv");"block"==t.style.display&&(t.style.display="none"),WGWindowLoader.laJquery("#conversationDIV").unbind(),laScriptObj.windowDisplayed=!1,laScriptObj.isAlreadyInChat=!1,laScriptObj.firstMessage=!0,laScriptObj.xmpp_invite=!1;var n=getInternetExplorerVersion();if(6==n||7==n?document.getElementById("ChatDiv").style.display="none":WGWindowLoader.laJquery("#ChatDiv").animate({opacity:0},1E3,function(){document.getElementById("ChatDiv").style.display="none"}),!laScriptObj.isOnlyGreeted&&e){laScriptObj.XMPPConnectedRetry=!0;var o="parChatId!";o+=laScriptObj.chatId,o+="~parChatEndTime!";var i=new Date;o+=i.getDate().toString()+"_"+i.getMonth().toString()+"_"+i.getFullYear().toString()+"_"+i.getHours().toString()+"_"+i.getMinutes().toString()+"_"+i.getSeconds().toString(),o+="~"+laScriptObj.getMethodStr+"!WGChat.onEndChatResponse",laScriptObj.getJsonServiceResponse("ET","WGChat.onEndChatResponse",o)}else
laScriptObj.createCookie(laScriptObj.LC_CEC,"laScriptObj.endStatus=1",1);laScriptObj.MsgWin.value=""},viewPortSetting:function(){var e;e=document.querySelector("meta[name=viewport]"),"undefined"!=typeof e&&null!=e?(document.getElementById("ChatDiv").style.height="333px",document.getElementById("ChatDiv").style.border="1px solid #aeaeae",document.getElementById("preFormPanelHeadText").style.width="100%",document.getElementById("botDiv").style.display="block",document.getElementById("ChatDiv").style.border="1px solid #aeaeae",document.getElementById("preFormPanelHeadBtn").style.display="block"):null==e&&(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/Android/i)&&navigator.userAgent.search("Mobile")>-1||navigator.userAgent.search("Mobile")>-1&&navigator.userAgent.search("BlackBerry")>-1)?(document.getElementById("ChatDiv").style.width="750px",document.getElementById("ChatDiv").style.height="750px",document.getElementById("ChatDiv").style.border="3px solid #aeaeae",document.getElementById("txtChatWin").style.height="575px",document.getElementById("preFormPanelHeadLink").style.fontSize="40px",document.getElementById("preFormPanelHeadText").style.padding="29px 0px",document.getElementById("dropArowStyle").style.fontSize="44px",document.getElementById("dropArowStyle").style.lineHeight="18px",document.getElementById("opname").style.fontSize="30px",document.getElementById("opconv").style.fontSize="30px",document.getElementById("vstrname").style.fontSize="30px",document.getElementById("vstrconv").style.fontSize="30px",document.getElementById("opname").style.lineHeight="30px",document.getElementById("opconv").style.lineHeight="30px",document.getElementById("vstrname").style.lineHeight="30px",document.getElementById("vstrconv").style.lineHeight="30px",document.getElementById("txtMessageWin").style.fontSize="30px",document.getElementById("btnSend").style.fontSize="30px",document.getElementById("txtMessageWin").style.bottom="40px",document.getElementById("btnSend").style.bottom="43px",document.getElementById("txtMessageWin").style.height="73px",document.getElementById("txtMessageWin").style.width="567px",document.getElementById("btnSend").style.height="72px",document.getElementById("btnSend").style.width="140px",document.getElementById("btnSend").style.right="6px",document.getElementById("btnSend").style.lineHeight="66px",document.getElementById("powerdBy").style.bottom="8px",document.getElementById("powerdBy").style.fontSize="25px",document.getElementById("preFormPanelHeadText").style.width="100%",document.getElementById("botDiv").style.display="block",document.getElementById("ChatDiv").style.border="1px solid #aeaeae",document.getElementById("preFormPanelHeadBtn").style.display="block"):(document.getElementById("ChatDiv").style.height="333px",document.getElementById("ChatDiv").style.border="1px solid #aeaeae",document.getElementById("ChatDiv").style.backgroundColor="#ffffff",document.getElementById("preFormPanelHeadText").style.width="100%",document.getElementById("botDiv").style.display="block",document.getElementById("preFormPanelHeadBtn").style.display="block")},sendFirstXmppMessage:function(){if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.getUserIdOrConnId(laScriptObj.actualUserId).done(function(e){if(e!=""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs","sendFirstXmppMessage-XMPPConnected:"+laScriptObj.XMPPConnected+" CONNECTING:"+laScriptObj.CONNECTING+" CONNFAIL:"+laScriptObj.CONNFAIL+" DISCONNECTING:"+laScriptObj.DISCONNECTING+" DISCONNECTED:"+laScriptObj.DISCONNECTED+" AUTHENTICATING:"+laScriptObj.AUTHENTICATING+" AUTHFAIL:"+laScriptObj.AUTHFAIL+" ERROR:"+laScriptObj.ERROR+" Singlar Connected:True").done(function(bool){}).fail(function(){})}else if(e==""){WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"XMPP:Logs","sendFirstXmppMessage-XMPPConnected:"+laScriptObj.XMPPConnected+" CONNECTING:"+laScriptObj.CONNECTING+" CONNFAIL:"+laScriptObj.CONNFAIL+" DISCONNECTING:"+laScriptObj.DISCONNECTING+" DISCONNECTED:"+laScriptObj.DISCONNECTED+" AUTHENTICATING:"+laScriptObj.AUTHENTICATING+" AUTHFAIL:"+laScriptObj.AUTHFAIL+" ERROR:"+laScriptObj.ERROR+" Singlar Connected:False "+laScriptObj.actualUserId).done(function(bool){}).fail(function(){})}}).fail(function(){});try{if(laScriptObj.ArrayDataToThrow.length>0)
for(var e=0;e<laScriptObj.ArrayDataToThrow.length;e++){var t=laScriptObj.ArrayDataToThrow[e].toString();WGChat.sendXmppMessage(t)}
else
WGChat.sendXmppMessage(laScriptObj.first_message_text)}catch(n){}
finally{for(;laScriptObj.ArrayDataToThrow.length;)
laScriptObj.ArrayDataToThrow.pop();laScriptObj.dataThrow=0}
laScriptObj.invitationAck=false;laScriptObj.inviteOperator(true)},myUTCDateString:function(e){return e.getUTCFullYear()+"-"+(e.getUTCMonth()+1)+"-"+e.getUTCDate()+" "+e.getUTCHours()+":"+e.getUTCMinutes()+":"+e.getUTCSeconds()},sendXmppMessage:function(e){var t=new Date;e=e.replace(/^\s+|\s+$/g,""),setTimeout(function(){laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:!0,user_id:0,manager_id:0,time_stamp:WGChat.myUTCDateString(t),website_id:laScriptObj.websiteId,visitor_name:laScriptObj.visitorName,type:"groupchat"}).c("body").t(e))},500)},SendChatMessage:function(){WGWindowConstant.blockCounter=true,"undefined"!=typeof hideMyWIndowVar&&clearTimeout(hideMyWIndowVar),hideMyWIndowVar=setTimeout("hideMyWindow()",44E4),clearTimeout(WGChat.showTypingDiv),clearTimeout(WGChat.hideTypingDiv),showTypingDiv=setTimeout("WGChat.showTypingstatusDiv()",1E4),hideTypingDiv=setTimeout("WGChat.hideTypingstatusDiv()",15E3);if(WGWindowLoader.laJquery.connection.hub&&WGWindowLoader.laJquery.connection.hub.state===WGWindowLoader.laJquery.signalR.connectionState.connected)
WGWindowLoader.chat.server.invokeMessage(laScriptObj.chatId," ","visitor");var e=laScriptObj.MsgWin.value;e.toString().length>=600&&(e=e.toString().substr(0,600));var t=e.replace(/^\s+|\s+$/g,"");return""==t||""==e||(WGChat.vstrChatLinking(laScriptObj.username,e,true),laScriptObj.pauseOtherTab=false,pauseOtherTabFiller=false,laScriptObj.firstMessage?(laScriptObj.first_message_text=e,window.clearTimeout(laScriptObj.CloseGreet),laScriptObj.firstMessage=!1,laScriptObj.isOnlyGreeted=!1,WGChat.InsertChat()):laScriptObj.XMPPConnected&&0==laScriptObj.ArrayDataToThrow.length&&WGChat.sendXmppMessage(e),laScriptObj.XMPPConnected&&0==laScriptObj.ArrayDataToThrow.length)?void 0:(laScriptObj.ArrayDataToThrow[laScriptObj.dataThrow]=e,void laScriptObj.dataThrow++)}},WGMLanguage={allLanguages:"",currentLanguage:"",clearOption:function(){if(WGMLanguage.allLanguages.hasChildNodes())
for(;WGMLanguage.allLanguages.childNodes.length>=1;)
WGMLanguage.allLanguages.removeChild(WGMLanguage.allLanguages.firstChild)},addOption:function(e,t,n){var o=document.createElement("div");o.innerHTML=t,o.id="language"+n,o.setAttribute("onclick","WGMLanguage.changeLanguage('"+n+"')"),o.style.textAlign="center",o.style.height="20px",o.style.paddingBottom="6px",o.style.paddingLeft="0px",o.style.borderBottom="1px solid #e4e8e9",o.style.width="70px",o.style.cursor="pointer","undefined"!=typeof property&&"undefined"!=typeof property.optn_color&&(o.style.color=property.optn_color,o.style.height=property.optn_height),e.appendChild(o)},loadLanguages:function(result){WGMLanguage.clearOption(WGMLanguage.allLanguages);var ids=result[0];var names=result[1];laScriptObj.priorityLanguage=result[2];var languageIds=ids.split(",");var languageNames=names.split(",");var count;for(count=0;count<languageIds.length-1;count++)
WGMLanguage.addOption(WGMLanguage.allLanguages,languageNames[count],languageIds[count]);if(document.getElementById("currentLanguage").innerHTML==""||document.getElementById("currentLanguage").innerHTML=="null")
document.getElementById("langContainer").style.display="none";if(parseInt(laScriptObj.currentLanguageId)>0)
currentLanguage.innerHTML=document.getElementById("language"+laScriptObj.currentLanguageId).innerHTML;if(languageIds.length<3){document.getElementById("selLang").style.display="none";document.getElementById("langContainer").style.display="none"}else{document.getElementById("langContainer").style.display="block";WGWindowLoader.laJquery("#langText").css("display","block")}},getLanguages:function(){var e="parD!";e+=laScriptObj.host;var t=new Date;var myArrow=document.getElementById("langArrow");e+="~parR!",e+=t.getTime().toString(),e+="~method!WGMLanguage.loadLanguages",laScriptObj.getJsonServiceResponse("GetLan","WGMLanguage.loadLanguages",e),document.getElementById("langText").appendChild(currentLanguage),document.getElementById("langText").appendChild(allLanguages),document.getElementById("langText").appendChild(myArrow)},unblockLanguage:function(){laScriptObj.blockLanguage=!1},changeLanguage:function(e){if(laScriptObj.currentLanguageId!==e){laScriptObj.userLanguage=e;if(laScriptObj.chatId!=null){laScriptObj.currentLanguageId=e,getUsernameServiceURL="parD!",getUsernameServiceURL+=laScriptObj.host,getUsernameServiceURL+="~parL!",getUsernameServiceURL+=e,getUsernameServiceURL+="~parCI!",getUsernameServiceURL+=laScriptObj.chatId,getUsernameServiceURL+="~"+laScriptObj.parRandmStr+"!",getUsernameServiceURL+=laScriptObj.getRandomValue(),getUsernameServiceURL+="~"+laScriptObj.getMethodStr+"!WGMLanguage.languageChanged",laScriptObj.getJsonServiceResponse("GetUOnMiRunningChatsByLan","WGMLanguage.languageChanged",getUsernameServiceURL)}else{laScriptObj.currentLanguageId=e,getUsernameServiceURL="parD!",getUsernameServiceURL+=laScriptObj.host,getUsernameServiceURL+="~parL!",getUsernameServiceURL+=e,getUsernameServiceURL+="~"+laScriptObj.parRandmStr+"!",getUsernameServiceURL+=laScriptObj.getRandomValue(),getUsernameServiceURL+="~"+laScriptObj.getMethodStr+"!WGMLanguage.languageChanged",laScriptObj.getJsonServiceResponse("GetUOnMiChatsByLan","WGMLanguage.languageChanged",getUsernameServiceURL)}}},languageChanged:function(e){if((e!=null&&e.length==3&&e[0]!="")||(e!=null&&e.length==4&&e[3]=="")){document.getElementById("selLang").style.display="none";laScriptObj.IsAlreadyGreeted=!0;var t=laScriptObj.actualUserId;laScriptObj.actualUserId=e[0],laScriptObj.username=e[1],"undefined"!=typeof WGWindowConstant.SName&&WGWindowConstant.SName?(laScriptObj.username=WGWindowConstant.mySName[laScriptObj.randomnumber],userSName=laScriptObj.username,"undefined"!=typeof SPic&&SPic&&(document.getElementById("opImage").src=opPath+username+".png")):laScriptObj.username=e[1],document.getElementById("cwin_username").innerHTML=laScriptObj.username;laScriptObj.actualUserIdCustom=laScriptObj.actualUserId;var n;n=document.getElementById("opDiv").cloneNode(!0),n.id="New"+opDiv.id,opnameNew=document.getElementById("opname").cloneNode(!0),opnameNew.id="New"+document.getElementById("opname").id,opnameNew.innerHTML=" Your language is now : "+document.getElementById("language"+laScriptObj.currentLanguageId).innerHTML+"<br/>",n.appendChild(opnameNew),laScriptObj.ChatWin.appendChild(n),laScriptObj.ChatWin.scrollTop=laScriptObj.ChatWin.scrollHeight,laScriptObj.createCookie("currentLanguageId",laScriptObj.currentLanguageId);if(0!==laScriptObj.currentLanguageId){currentLanguage.innerHTML=document.getElementById("language"+laScriptObj.currentLanguageId).innerHTML}
laScriptObj.blockLanguage=!0;setTimeout("WGMLanguage.unblockLanguage()",1E4);if(e!=null&&e.length==3&&e[0]!=""){if(laScriptObj.isAlreadyInChat&&null!==laScriptObj.chatId){laScriptObj.connection.send($msg({to:laScriptObj.room,chat_id:laScriptObj.chatId,custom_packet:!1,user_id:t,manager_id:0,time_stamp:"",website_id:laScriptObj.websiteId,visitor_name:laScriptObj.visitorName,type:"groupchat"}).c("gone",{xmlns:"http://jabber.org/protocol/chatstates"}));var o="parChatId!";o+=encodeURIComponent(laScriptObj.chatId),o+="~parUI!",o+=laScriptObj.actualUserId,o+="~method!WGWebsite.onInsertGreetInfoResponse",laScriptObj.getJsonServiceResponse("UUserByLan","WGWebsite.onInsertGreetInfoResponse",o),laScriptObj.xmpp_invite=!1,laScriptObj.inviteOperator()}}}}},WGAdManagement={onGetAdDetailsResponse:function(obj){function CreateIframeAds(e,t){t+=escape(e),ifrm=document.createElement("IFRAME"),ifrm.id="adFrame",ifrm.setAttribute("src",t),ifrm.style.border="noned",ifrm.style.width="100%",ifrm.style.height="100%",ifrm.style.scrolling="no",ifrm.style.left="30.5%",Dom.get("formDiv").appendChild(ifrm)}
function replaceAll(e,t,n){return n.replace(new RegExp(e,"g"),t)}
function showForm(e,t,n,o,i){document.getElementById("formDiv").innerHTML="",jsonpCreator(_chatURL+"InsertAdVisitorInfo?parA="+e+"&parW="+t+"&parTitle="+n+"&parDescription="+o+"&parImage="+i+"&parD="+document.URL+"&parV="+laScriptObj.visitorId+"&parSubmit=false&parR="+getRandomValue()),ModalWrapper.style.display="block";var a=document.createElement("div");a.id="closeDiv",Dom.get("formDiv").appendChild(a),Dom.setStyle("closeDiv","position","absolute"),Dom.setStyle("closeDiv","float","right"),Dom.setStyle("closeDiv","right","10px"),Dom.setStyle("closeDiv","z-index","9999999"),Dom.setStyle("closeDiv","top","5px"),Dom.setStyle("closeDiv","cursor","pointer"),Dom.setStyle("closeDiv","height","24px"),Dom.setStyle("closeDiv","width","24px"),a.style.backgroundImage='url("http://greeterware.com/dashboard/cwgen/skin/closebutton/Close-icon.png")',a.style.backgroundRepeat="no-repeat",YAHOO.util.Event.addListener(a,"click",closeForm),CreateIframeAds("","http://www.wglivechatsoftware.com/form/default.aspx?AdId="+e+"&WebId="+t+"&title="+encodeURI(n)+"&desc="+encodeURI(replaceAll("</?!?(b|br)[^>]*>","",o))+"&path="+encodeURI(i)+"&Domain="+encodeURI(document.URL)+"&Visitor="+laScriptObj.visitorId),Dom.setStyle("formDiv","display","block")}
function closeForm(){ModalWrapper.style.display="none",document.getElementById("formDiv").innerHTML="",Dom.setStyle("formDiv","display","none")}
function MultipleAds(e,t,n,o,i,a,d){var r=document.createElement("div");r.id="MultipleAds"+d,Dom.get("mainDiv").appendChild(r),r.style.width="340px",r.style.height="115px",r.style.border="1px solid grey",r.style.backgroundColor="black",r.style.opacity=.85;var s=document.createElement("div");s.id="Title_Ads"+d,Dom.get("MultipleAds"+
d).appendChild(s),s.style.width="300px",s.style.position="absolute",s.style.left="10px",s.style.paddingLeft="5px",s.style.height="20px",s.style.textAlign="justify",s.style.marginTop="3px",s.style.fontFamily="Calibri";var l=document.createElement("div");l.id="M_Text_And_Description"+d,Dom.get("MultipleAds"+d).appendChild(l),l.style.width="320px",l.style.Color="#FFFFFF",l.style.height="88px",l.style.position="absolute",l.style.marginLeft="10px",l.style.marginTop="20px",l.style.fontFamily="Calibri";var W=document.createElement("div");W.id="M_Image"+d,Dom.get("M_Text_And_Description"+d).appendChild(W),W.style.position="absolute",W.style.width="100px",W.style.height="75px",W.style.cursor="pointer",W.style.marginTop="4px";var c=document.createElement("div");c.id="M_Description"+d,Dom.get("M_Text_And_Description"+d).appendChild(c),c.style.position="absolute",c.style.left="117px",c.style.textAlign="justify",c.style.width="200px",c.style.height="60px",c.style.marginTop="0px",c.style.color="white";var m=document.createElement("div");m.id="M_Button_View"+d,Dom.get("M_Text_And_Description"+d).appendChild(m),m.style.position="absolute",m.style.bottom="0px",m.style.width="54px",m.style.right="3px",m.style.top="61px",m.style.height="22px",s.innerHTML=n.length>30?n.substring(0,30).toUpperCase()+"...":n.toUpperCase(),s.style.fontSize="17px",s.style.color="#FFFFFF",s.style.cursor="pointer",YAHOO.util.Event.addListener("Title_Ads"+d,"click",function(){showForm(e,t,n,o,a,d)},!1),c.innerHTML=o.length>110?o.substring(0,110)+".....":o,c.style.fontSize="14px",c.style.fontFamily="calibri",c.style.color="#FFFFFF",c.style.cursor="pointer",YAHOO.util.Event.addListener("M_Description"+d,"click",function(){showForm(e,t,n,o,a,d)},!1);var u=document.createElement("IMG");u.src=a,Dom.get("M_Image"+d).appendChild(u),W.style.backgroundRepeat="no-repeat",W.style.padding="3px",W.style.backgroundColor="#CED4DA",W.style.borderRadius="2px",W.style.cursor="pointer",YAHOO.util.Event.addListener("M_Image"+d,"click",function(){showForm(e,t,n,o,a,d)},!1),m.style.backgroundImage='url("http://greeterware.com/dashboard/cwgen/skin/sendbutton/getnow.png")',m.style.backgroundRepeat="no-repeat",m.style.cursor="pointer",YAHOO.util.Event.addListener("M_Button_View"+d,"click",function(){showForm(e,t,n,o,a,d)},!1)}
var result=eval("("+obj+")");if("0"!=result[0].AdId){var count,totalLength=result.length,heightMain,ModalWrapper=document.createElement("div");ModalWrapper.id="ModalWrapper",document.body.appendChild(ModalWrapper),ModalWrapper.style.position="fixed",ModalWrapper.style.width="100%",ModalWrapper.style.height="100%",ModalWrapper.style.zIndex="99999",ModalWrapper.style.top="0px",ModalWrapper.style.backgroundColor="black",ModalWrapper.style.opacity="0.75",ModalWrapper.style.scrolling="no",ModalWrapper.style.display="none";var formDiv=document.createElement("div");for(formDiv.id="formDiv",document.body.appendChild(formDiv),Dom.setStyle("formDiv","position","fixed"),Dom.setStyle("formDiv","background-color","#FFFFFF"),Dom.setStyle("formDiv","height","570px"),Dom.setStyle("formDiv","width","570px"),Dom.setStyle("formDiv","display","none"),Dom.setStyle("formDiv","overflow","none"),Dom.setStyle("formDiv","left","30%"),Dom.setStyle("formDiv","top","10px"),Dom.setStyle("formDiv","border","solid 5px gray"),Dom.setStyle("formDiv","-webkit-border-radius","5px"),Dom.setStyle("formDiv","-moz-border-radius","5px"),Dom.setStyle("formDiv","border-radius","5px"),Dom.setStyle("formDiv","z-index","999999"),count=0;totalLength>count;count++)
MultipleAds(result[count].AdId,result[count].WebsiteId,result[count].title,result[count].description,result[count].link,result[count].imagePath,count);window.onload=Blink(count),myAnimAdDiv=new YAHOO.util.Anim("mainDiv",{left:{by:-345}},0,YAHOO.util.Easing.easeOut),myAnimAdDiv.animate();var myAnimAdDiv=new YAHOO.util.Anim("mainDiv",{bottom:{from:-175,to:10}},1,YAHOO.util.Easing.easeNone);myAnimAdDiv.animate()}},GetAdvertisementData:function(e){jsonpCreator(_chatURL+"ShowAds?parW="+e+"&parU="+document.URL+"&parR="+getRandomValue()+"&"+Constants.getMethodStr()+"=onGetAdDetailsResponse")}};setTimeout(function(){if(typeof Mascot!="undefined")
Mascot.checkMascot()},3E3);var oldWinOnUnload=window.onunload=window.onbeforeunload;window.onunload=window.onbeforeunload=function(e){if(oldWinOnUnload)
oldWinOnUnload.apply(this,arguments);};WGWindowLoader.chat.client.VisitorData=function(){};WGWindowLoader.chat.client.InvitationAckRes=function(visitorId,chatId){laScriptObj.invitationAck=true;laScriptObj.FirstMessageByVisitor="Yes";clearTimeout(laScriptObj.OperatorAckCounterReply);clearTimeout(laScriptObj.OperatorAckCounterReply2);WGWindowLoader.chat.server.markingChatAckLogs(laScriptObj.visitorId,laScriptObj.chatId,laScriptObj.actualUserId,"logs","InvitationAckRes Chat Ack By Greeter Name: "+laScriptObj.UserNameCustom+" UserId: "+laScriptObj.actualUserId).done(function(bool){});};WGWindowLoader.laJquery.connection.hub.start({transport:["webSockets","longPolling"],jsonp:true,xdomain:true,waitForPageLoad:false}).done(function(){WGWindowLoader.signalRConnected=true;var resultCookie=La.readCookieJson("WG_VIC_J");var resultwi=La.readCookieJson("WG_WEB");if(resultwi!=""&&resultCookie!="")
if(typeof getData!="undefined")
getData(WGWindowLoader.laJquery);});if(sessionStorage.getItem("lastActivity")&&document.getElementById("ChatDiv").style.display=="none"&&WGWindowLoader.laJquery("#msgText").html()!="")
setTimeout(function(){if(typeof Mascot!="undefined")
Mascot.showMascot()},3E3);WGWindowLoader.laJquery("#minimizeButton").click(function(){laScriptObj.createCookie("minimizeCookie",1,1)});WGWindowLoader.laJquery("#newOnlineBtn").click(function(){laScriptObj.createCookie("minimizeCookie",0,1)});WGWindowLoader.laJquery("#Newopname").parent().addClass("operatorBG");WGWindowLoader.laJquery("#Newvstrname").parent().addClass("visitorBG");WGWindowLoader.laJquery("#opname").parent().addClass("operatorBG");WGWindowLoader.laJquery("#vstrname").parent().addClass("visitorBG");function HideOffline(){WGWindowLoader.laJquery("#offline-form-container, #ChatDiv").css("display","none");WGWindowLoader.laJquery("#ChatDiv").css("opacity","0");WGWindowLoader.laJquery("#ChatDiv").css("opacity",0);WGWindowLoader.laJquery("#live_chat_status a").attr("href","javascript:WGWebsite.WG_OnOfflineClick()");laScriptObj.createCookie("minimizeCookie",null,-24);laScriptObj.createCookie("minimizeMessages",null,-24);localStorage.removeItem("newonlinebtnimg")}
getJsonServiceResponseNew=function(WGSFunc,CBFunc,obj){WGWindowLoader.laJquery.ajax({type:"GET",url:WGWindowConstant._chatURL+WGSFunc+"?callback=?",data:obj,jsonp:CBFunc,dataType:"jsonp",crossDomain:true,success:CBFunc,cache:false,error:function(e){}})};getJsonServiceResponseUpdated=function(WGSFunc,CBFunc,PRAMFunc){var JsonData="{";var parmLong=PRAMFunc.split("~");for(var i=0;i<parmLong.length;i++){var parmShort=parmLong[i].split("^");JsonData=JsonData+'"'+parmShort[0]+'":"'+parmShort[1]+'",'}
JsonData=JsonData.substring(0,JsonData.lastIndexOf(","));JsonData=JsonData+"}";WGWindowLoader.laJquery.ajax({type:"GET",url:WGWindowConstant._chatURL+WGSFunc+"?callback=?",data:JSON.parse(JsonData),jsonp:CBFunc,dataType:"jsonp",crossDomain:true,success:CBFunc,cache:false,error:function(jqXHR,textStatus,errorThrown){}})};function OfflineCall(){if(ValidateOfflineContactForm()){document.getElementById("form-fields-container").style.display="none";document.getElementById("form-title-text").style.display="none";var preChatName=document.getElementById("offlineName").value;var preChatEmail=document.getElementById("offlineEmail").value;var preChatPhone=document.getElementById("offlinePhone").value;var preChatReason=document.getElementById("offlineMessage").value;document.getElementById("offlineName").value="";document.getElementById("offlineEmail").value="";document.getElementById("offlinePhone").value="";document.getElementById("offlineMessage").value="";var offlineThankMsg=document.createElement("span");offlineThankMsg.id="offlineThankMsg";document.getElementById("offline-form-content").appendChild(offlineThankMsg);for(var i in myLanguages[langArray[laScriptObj.priorityLanguage]])
WGWindowLoader.laJquery("#offline-form-container #"+i).text(myLanguages[langArray[laScriptObj.priorityLanguage]][i]);var resultCookie=La.readCookieJson("WG_VIC_J");var resultwiNew=La.readCookieJson("WG_WEB");var offlineFormLink={"sessionId":resultCookie.Session,"websiteID":resultwiNew.W_I,"visitorID":resultCookie.V_I,"clientType":"LA","name":preChatName,"email":preChatEmail,"phone":preChatPhone,"message":preChatReason,"method":"offlineEmailSentResponse"};getJsonServiceResponseNew("InsertOfflineMessage","offlineEmailSentResponse",offlineFormLink)}else
return false}
function offlineEmailSentResponse(e){}
var charReg=/^\s*[a-zA-Z0-9,\s]+\s*$/;WGWindowLoader.laJquery("#offlineMessage").keyup(function(event){var key=event.keyCode||event.charCode;var inputVal=WGWindowLoader.laJquery(this).val();if(!charReg.test(inputVal)){var str=WGWindowLoader.laJquery(this).val();str=str.replace(/[^a-zA-Z 0-9]+/g,"");WGWindowLoader.laJquery(this).val(str);if(key!=8&&key!=46){WGWindowLoader.laJquery(".warning").show().delay(1500).fadeOut();WGWindowLoader.laJquery(this).parent().find(".warning").show()}}else;}).blur(function(){var str=WGWindowLoader.laJquery(this).val();str=str.replace(/[^a-zA-Z 0-9]+/g,"");WGWindowLoader.laJquery(this).val(str)});if(typeof WGWindowConstant.lc_mobileBubble=="undefined"){WGWindowLoader.laJquery('head').append('<style type="text/css">#bubAnim #bubble{display:none !important;}</style>');}
if(typeof WGWindowConstant.lc_mobileBubble=="undefined"){WGWindowLoader.laJquery('head').append('<style type="text/css">#bubAnim #bubble{display:none !important;}</style>');}
WGWindowLoader.laJquery("#minimizeButton").click(function(){WGWindowLoader.laJquery('.our-chat-button').attr('onclick',"javascript:OnOff()");})